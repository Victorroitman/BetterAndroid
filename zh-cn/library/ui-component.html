<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.0">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/BetterAndroid/images/logo.png"><title>ui-component | Better Android</title><meta name="description" content="为 Android 创建更多有用的工具扩展">
    <link rel="preload" href="/BetterAndroid/assets/style-Rgr8LWAc.css" as="style"><link rel="stylesheet" href="/BetterAndroid/assets/style-Rgr8LWAc.css">
    <link rel="modulepreload" href="/BetterAndroid/assets/app-ltPCiGOj.js"><link rel="modulepreload" href="/BetterAndroid/assets/ui-component.html-KT5EYDha.js"><link rel="modulepreload" href="/BetterAndroid/assets/ui-component.html-56bnQGvE.js">
    <link rel="prefetch" href="/BetterAndroid/assets/index.html-jF4F_Jea.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/index.html-PARuE-X-.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/index.html-oDIKH1cB.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/about.html-uY9riSdh.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/changelog.html-c_VqLMoX.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/contacts.html-86YUIjVU.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/future.html-yqb27IxN.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/basic.html-EJIReltC.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/r8-proguard.html-odMEh5xB.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/home.html-LzcfoNb7.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/quick-start.html-bCTwVO9L.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-extension.html-4zRtEGDC.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-multiplatform.html-82HQEYGr.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/permission-extension.html-q6WEKAxW.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/system-extension.html-dqnIT0um.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-component.html-j2OUQLY0.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-extension.html-KWr3W3vG.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/about.html-Gp1aGYya.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/changelog.html-SduVASWz.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/contacts.html-8qKP4333.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/future.html-G41ap5rf.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/basic.html-kmRarnM9.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/r8-proguard.html-GzppQxpQ.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/home.html-OhhOvxle.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/quick-start.html-ZpYZT1os.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-extension.html-eliB8kaO.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-multiplatform.html-pvKDgydw.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/permission-extension.html-lAfntmHN.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/system-extension.html-6_1EwbPb.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-extension.html-7VpIMJEl.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/404.html-6Yl8cQE3.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/index.html-UiC_UFGO.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/index.html-0ffAK9X-.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/index.html-CFZqCMTb.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/about.html-MuLV_6gW.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/changelog.html-nMtSQwKc.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/contacts.html-ElDnajtZ.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/future.html-wlykN6zD.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/basic.html-EkaBYisx.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/r8-proguard.html-b2xM80n9.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/home.html-sk_2CyAB.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/quick-start.html--a87sLmT.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-extension.html-3FGsQ7Ic.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-multiplatform.html-XF3zx08Z.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/permission-extension.html-XmKw6mIr.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/system-extension.html-UMEOlL3V.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-component.html-B3-lUFyZ.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-extension.html-QKryeOuC.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/about.html-fQ4eYc-e.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/changelog.html-3aa8mALS.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/contacts.html-w-ngeHFR.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/future.html-G4YcDOYQ.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/basic.html-1uaBuxKj.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/r8-proguard.html-csYmd3W2.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/home.html-A6Hj7Yly.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/quick-start.html-NuOHchRr.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-extension.html-z4OfUQXZ.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-multiplatform.html-8Y8jlNdF.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/permission-extension.html-P6ujjbbj.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/system-extension.html-PHuNXl1a.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-extension.html-3MrriXOR.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/404.html-ssOQbuEn.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/BetterAndroid/zh-cn/" class=""><img class="logo" src="/BetterAndroid/images/logo.png" alt="Better Android"><span class="site-name can-hide">Better Android</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="导航"><span class="title">导航</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="导航"><span class="title">导航</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>入门</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/guide/home.html" class="" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/guide/quick-start.html" class="" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>依赖</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html" class="router-link-active router-link-exact-active router-link-active" aria-label="ui-component"><!--[--><!--]--> ui-component <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/ui-extension.html" class="" aria-label="ui-extension"><!--[--><!--]--> ui-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/system-extension.html" class="" aria-label="system-extension"><!--[--><!--]--> system-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/permission-extension.html" class="" aria-label="permission-extension"><!--[--><!--]--> permission-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/compose-extension.html" class="" aria-label="compose-extension"><!--[--><!--]--> compose-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/compose-multiplatform.html" class="" aria-label="compose-multiplatform"><!--[--><!--]--> compose-multiplatform <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>配置</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/config/basic.html" class="" aria-label="基本配置"><!--[--><!--]--> 基本配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/config/r8-proguard.html" class="" aria-label="R8 与 Proguard 混淆"><!--[--><!--]--> R8 与 Proguard 混淆 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>关于</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/changelog.html" class="" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/future.html" class="" aria-label="展望未来"><!--[--><!--]--> 展望未来 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/contacts.html" class="" aria-label="联系我们"><!--[--><!--]--> 联系我们 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/about.html" class="" aria-label="关于此文档"><!--[--><!--]--> 关于此文档 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/BetterAndroid/zh-cn/about/contacts" class="" aria-label="联系我们"><!--[--><!--]--> 联系我们 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">简体中文 (CN)</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">简体中文 (CN)</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/BetterAndroid/en/library/ui-component.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/BetterAndroid/BetterAndroid" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换颜色模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="导航"><span class="title">导航</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="导航"><span class="title">导航</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>入门</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/guide/home.html" class="" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/guide/quick-start.html" class="" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>依赖</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html" class="router-link-active router-link-exact-active router-link-active" aria-label="ui-component"><!--[--><!--]--> ui-component <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/ui-extension.html" class="" aria-label="ui-extension"><!--[--><!--]--> ui-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/system-extension.html" class="" aria-label="system-extension"><!--[--><!--]--> system-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/permission-extension.html" class="" aria-label="permission-extension"><!--[--><!--]--> permission-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/compose-extension.html" class="" aria-label="compose-extension"><!--[--><!--]--> compose-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/compose-multiplatform.html" class="" aria-label="compose-multiplatform"><!--[--><!--]--> compose-multiplatform <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>配置</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/config/basic.html" class="" aria-label="基本配置"><!--[--><!--]--> 基本配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/config/r8-proguard.html" class="" aria-label="R8 与 Proguard 混淆"><!--[--><!--]--> R8 与 Proguard 混淆 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>关于</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/changelog.html" class="" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/future.html" class="" aria-label="展望未来"><!--[--><!--]--> 展望未来 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/contacts.html" class="" aria-label="联系我们"><!--[--><!--]--> 联系我们 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/about.html" class="" aria-label="关于此文档"><!--[--><!--]--> 关于此文档 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/BetterAndroid/zh-cn/about/contacts" class="" aria-label="联系我们"><!--[--><!--]--> 联系我们 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">简体中文 (CN)</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">简体中文 (CN)</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/BetterAndroid/en/library/ui-component.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/BetterAndroid/BetterAndroid" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">入门 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/BetterAndroid/zh-cn/guide/home.html" class="sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/guide/quick-start.html" class="sidebar-item" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">依赖 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="ui-component"><!--[--><!--]--> ui-component <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#配置依赖" class="router-link-active router-link-exact-active sidebar-item" aria-label="配置依赖"><!--[--><!--]--> 配置依赖 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#sweetdependency-推荐" class="router-link-active router-link-exact-active sidebar-item" aria-label="SweetDependency (推荐)"><!--[--><!--]--> SweetDependency (推荐) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#传统方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="传统方式"><!--[--><!--]--> 传统方式 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#功能介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="功能介绍"><!--[--><!--]--> 功能介绍 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#activity" class="router-link-active router-link-exact-active sidebar-item" aria-label="Activity"><!--[--><!--]--> Activity <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#fragment" class="router-link-active router-link-exact-active sidebar-item" aria-label="Fragment"><!--[--><!--]--> Fragment <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#适配器-adapter" class="router-link-active router-link-exact-active sidebar-item" aria-label="适配器 (Adapter)"><!--[--><!--]--> 适配器 (Adapter) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#系统事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="系统事件"><!--[--><!--]--> 系统事件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#通知" class="router-link-active router-link-exact-active sidebar-item" aria-label="通知"><!--[--><!--]--> 通知 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#边衬区-insets" class="router-link-active router-link-exact-active sidebar-item" aria-label="边衬区 (Insets)"><!--[--><!--]--> 边衬区 (Insets) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-component.html#系统栏-状态栏、导航栏等" class="router-link-active router-link-exact-active sidebar-item" aria-label="系统栏 (状态栏、导航栏等)"><!--[--><!--]--> 系统栏 (状态栏、导航栏等) <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/BetterAndroid/zh-cn/library/ui-extension.html" class="sidebar-item" aria-label="ui-extension"><!--[--><!--]--> ui-extension <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/library/system-extension.html" class="sidebar-item" aria-label="system-extension"><!--[--><!--]--> system-extension <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/library/permission-extension.html" class="sidebar-item" aria-label="permission-extension"><!--[--><!--]--> permission-extension <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/library/compose-extension.html" class="sidebar-item" aria-label="compose-extension"><!--[--><!--]--> compose-extension <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/library/compose-multiplatform.html" class="sidebar-item" aria-label="compose-multiplatform"><!--[--><!--]--> compose-multiplatform <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">配置 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/BetterAndroid/zh-cn/config/basic.html" class="sidebar-item" aria-label="基本配置"><!--[--><!--]--> 基本配置 <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/config/r8-proguard.html" class="sidebar-item" aria-label="R8 与 Proguard 混淆"><!--[--><!--]--> R8 与 Proguard 混淆 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">关于 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/BetterAndroid/zh-cn/about/changelog.html" class="sidebar-item" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/about/future.html" class="sidebar-item" aria-label="展望未来"><!--[--><!--]--> 展望未来 <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/about/contacts.html" class="sidebar-item" aria-label="联系我们"><!--[--><!--]--> 联系我们 <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/about/about.html" class="sidebar-item" aria-label="关于此文档"><!--[--><!--]--> 关于此文档 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="ui-component" tabindex="-1"><a class="header-anchor" href="#ui-component" aria-hidden="true">#</a> ui-component</h1><p><img src="https://img.shields.io/maven-central/v/com.highcapable.betterandroid/ui-component?logo=apachemaven&amp;logoColor=orange" alt="Maven Central"><span style="margin-left:5px;"></span><img src="https://img.shields.io/badge/Min SDK-21-orange?logo=android" alt="Android Min SDK"></p><p>这是针对 UI (用户界面) 相关组件的一个依赖。</p><h2 id="配置依赖" tabindex="-1"><a class="header-anchor" href="#配置依赖" aria-hidden="true">#</a> 配置依赖</h2><p>你可以使用如下方式将此模块添加到你的项目中。</p><h3 id="sweetdependency-推荐" tabindex="-1"><a class="header-anchor" href="#sweetdependency-推荐" aria-hidden="true">#</a> SweetDependency (推荐)</h3><p>在你的项目 <code>SweetDependency</code> 配置文件中添加依赖。</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#8DDB8C;">libraries</span><span style="color:#ADBAC7;">:</span></span>
<span class="line"><span style="color:#ADBAC7;">  </span><span style="color:#8DDB8C;">com.highcapable.betterandroid</span><span style="color:#ADBAC7;">:</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#8DDB8C;">ui-component</span><span style="color:#ADBAC7;">:</span></span>
<span class="line"><span style="color:#ADBAC7;">      </span><span style="color:#8DDB8C;">version</span><span style="color:#ADBAC7;">: </span><span style="color:#96D0FF;">+</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在你的项目 <code>build.gradle.kts</code> 中配置依赖。</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#DCBDFB;">implementation</span><span style="color:#ADBAC7;">(com.highcapable.betterandroid.ui.component)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="传统方式" tabindex="-1"><a class="header-anchor" href="#传统方式" aria-hidden="true">#</a> 传统方式</h3><p>在你的项目 <code>build.gradle.kts</code> 中配置依赖。</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#DCBDFB;">implementation</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.highcapable.betterandroid:ui-component:&lt;version&gt;&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>请将 <code>&lt;version&gt;</code> 修改为此文档顶部显示的版本。</p><h2 id="功能介绍" tabindex="-1"><a class="header-anchor" href="#功能介绍" aria-hidden="true">#</a> 功能介绍</h2><p>你可以 <a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component" target="_blank" rel="noopener noreferrer">点击这里<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 查看 KDoc。</p><h3 id="activity" tabindex="-1"><a class="header-anchor" href="#activity" aria-hidden="true">#</a> Activity</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.activity/-app-binding-activity" target="_blank" rel="noopener noreferrer">AppBindingActivity<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>带有视图绑定的 <code>Activity</code> (继承于 <code>AppCompatActivtiy</code>)。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.activity/-app-views-activity" target="_blank" rel="noopener noreferrer">AppViewsActivity<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>基础视图组件 <code>Activity</code> (继承于 <code>AppCompatActivtiy</code>)。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.activity/-app-component-activity" target="_blank" rel="noopener noreferrer">AppComponentActivity<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>基础组件 <code>Activity</code> (继承于 <code>ComponentActivtiy</code>)。</p><p>可用于 Jetpack Compose 项目。</p></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>下方的预置组件都实现了 <a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.proxy/-i-back-pressed-controller" target="_blank" rel="noopener noreferrer">IBackPressedController<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a>、 <a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.proxy/-i-system-bars-controller" target="_blank" rel="noopener noreferrer">ISystemBarsController<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 接口。</p><p>你可以在下方的 <a href="#%E7%B3%BB%E7%BB%9F%E4%BA%8B%E4%BB%B6">系统事件</a> 和 <a href="#%E7%B3%BB%E7%BB%9F%E6%A0%8F-%E7%8A%B6%E6%80%81%E6%A0%8F%E3%80%81%E5%AF%BC%E8%88%AA%E6%A0%8F%E7%AD%89">系统栏 (状态栏、导航栏等)</a> 中找到详细的使用方法。</p></div><p>在使用 <code>ViewBinding</code> 的情况下，你可以使用 <code>AppBindingActivity</code> 来快速创建一个带有视图绑定的 <code>Activity</code>。</p><p>在 <code>AppBindingActivity</code> 中，你可以直接使用 <code>binding</code> 属性获取视图绑定对象而无需手动调用 <code>setContentView</code> 方法。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">MainActivity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">AppBindingActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">ActivityMainBinding</span><span style="color:#ADBAC7;">&gt;() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.mainText.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你也可以使用 <code>AppViewsActivity</code> 来创建一个基本 <code>Activity</code>，使用 <code>findViewById</code> 方法来获取 <code>View</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">MainActivity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">AppViewsActivity</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#DCBDFB;">setContentView</span><span style="color:#ADBAC7;">(R.layout.activity_main)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#DCBDFB;">findViewById</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">TextView</span><span style="color:#ADBAC7;">&gt;(R.id.main_text).text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你的项目是一个 Jetpack Compose 项目，你可以使用 <code>AppComponentActivity</code> 来创建一个基本 <code>Activity</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">MainActivity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">AppComponentActivity</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#DCBDFB;">setContent</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#DCBDFB;">Text</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">        }</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>有关 Jetpack Compose 的相关扩展你可以参考 <a href="/BetterAndroid/zh-cn/library/compose-extension.html" class="">compose-extension</a>、<a href="/BetterAndroid/zh-cn/library/compose-multiplatform.html" class="">compose-multiplatform</a>。</p><p><code>BetterAndroid</code> 同样为 <code>Activity</code> 提供了相关扩展，你可以参考 <a href="/BetterAndroid/zh-cn/library/ui-extension.html#activity-%E6%89%A9%E5%B1%95" class="">ui-extension → Activity 扩展</a>。</p></div><h3 id="fragment" tabindex="-1"><a class="header-anchor" href="#fragment" aria-hidden="true">#</a> Fragment</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.fragment/-app-binding-fragment" target="_blank" rel="noopener noreferrer">AppBindingFragment<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>带有视图绑定的 <code>Fragment</code>。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.fragment/-app-views-fragment" target="_blank" rel="noopener noreferrer">AppViewsFragment<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>基础视图组件 <code>Fragment</code>。</p></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>下方的预置组件都实现了 <a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.proxy/-i-back-pressed-controller" target="_blank" rel="noopener noreferrer">IBackPressedController<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a>、 <a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.proxy/-i-system-bars-controller" target="_blank" rel="noopener noreferrer">ISystemBarsController<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 接口。</p><p>你可以在下方的 <a href="#%E7%B3%BB%E7%BB%9F%E4%BA%8B%E4%BB%B6">系统事件</a> 和 <a href="#%E7%B3%BB%E7%BB%9F%E6%A0%8F-%E7%8A%B6%E6%80%81%E6%A0%8F%E3%80%81%E5%AF%BC%E8%88%AA%E6%A0%8F%E7%AD%89">系统栏 (状态栏、导航栏等)</a> 中找到详细的使用方法。</p></div><p>在使用 <code>ViewBinding</code> 的情况下，你可以使用 <code>AppBindingFragment</code> 来快速创建一个带有视图绑定的 <code>Fragment</code>。</p><p>在 <code>AppBindingFragment</code> 中，你可以直接使用 <code>binding</code> 属性获取视图绑定对象而无需手动重写 <code>onCreateView</code> 方法。</p><p>你不需要考虑 <code>Fragment</code> 的生命周期对 <code>binding</code> 的影响，<code>BetterAndroid</code> 已经为你处理了这些问题。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">MainFragment</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">AppBindingFragment</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">FragmentMainBinding</span><span style="color:#ADBAC7;">&gt;() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onViewCreated</span><span style="color:#ADBAC7;">(view: </span><span style="color:#F69D50;">View</span><span style="color:#ADBAC7;">, savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onViewCreated</span><span style="color:#ADBAC7;">(view, savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.mainText.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你也可以使用 <code>AppViewsFragment</code> 来创建一个基本 <code>Fragment</code>。</p><p>同样地，你无需重写 <code>onCreateView</code> 方法，直接将需要绑定的布局资源 ID 填入构造方法即可。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">MainFragment</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">AppViewsFragment</span><span style="color:#ADBAC7;">(</span><span style="color:#F69D50;">R</span><span style="color:#ADBAC7;">.</span><span style="color:#F69D50;">layout</span><span style="color:#ADBAC7;">.</span><span style="color:#F69D50;">fragment_main</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onViewCreated</span><span style="color:#ADBAC7;">(view: </span><span style="color:#F69D50;">View</span><span style="color:#ADBAC7;">, savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onViewCreated</span><span style="color:#ADBAC7;">(view, savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        view.</span><span style="color:#DCBDFB;">findViewById</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">TextView</span><span style="color:#ADBAC7;">&gt;(R.id.main_text).text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p><code>BetterAndroid</code> 同样为 <code>Fragment</code> 提供了相关扩展，你可以参考 <a href="/BetterAndroid/zh-cn/library/ui-extension.html#fragment-%E6%89%A9%E5%B1%95" class="">ui-extension → Fragment 扩展</a>。</p></div><h3 id="适配器-adapter" tabindex="-1"><a class="header-anchor" href="#适配器-adapter" aria-hidden="true">#</a> 适配器 (Adapter)</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.adapter/-common-adapter-builder" target="_blank" rel="noopener noreferrer">CommonAdapterBuilder<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>可用于构建一个 <code>BaseAdapter</code>。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.adapter/-pager-adapter-builder" target="_blank" rel="noopener noreferrer">PagerAdapterBuilder<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>可用于构建一个 <code>PagerAdapter</code>。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.adapter/-recycler-adapter-builder" target="_blank" rel="noopener noreferrer">RecyclerAdapterBuilder<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>可用于构建一个 <code>RecyclerView.Adapter</code>。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.adapter.mediator/-pager-mediator" target="_blank" rel="noopener noreferrer">PagerMediator<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>ViewPager</code> 的页面调节器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.adapter.recycler.cosmetic/-recycler-cosmetic" target="_blank" rel="noopener noreferrer">RecyclerCosmetic<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>RecyclerView</code> 的 <code>LayoutManager</code> 与 <code>ItemDecoration</code> 的装饰器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.adapter.recycler.decoration/-linear-horizontal-item-decoration" target="_blank" rel="noopener noreferrer">LinearHorizontalItemDecoration<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>RecyclerView</code> 的线性横向列表装饰器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.adapter.recycler.decoration/-linear-vertical-item-decoration" target="_blank" rel="noopener noreferrer">LinearVerticalItemDecoration<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>RecyclerView</code> 的线性纵向列表装饰器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.adapter.recycler.decoration/-grid-vertical-item-decoration" target="_blank" rel="noopener noreferrer">GridVerticalItemDecoration<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>RecyclerView</code> 的九宫格纵向列表装饰器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.adapter.factory" target="_blank" rel="noopener noreferrer">CommonAdapter<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于上述适配器构建的扩展方法。</p></div><p>Android 中的适配器从 <code>ListView</code> 开始到 <code>RecyclerView</code> 的出现，一直是开发者最头疼的问题之一。</p><p>针对这个问题，<code>BetterAndroid</code> 对以下组件的适配器进行了封装：</p><p><code>ListView</code>、<code>AutoCompleteTextView</code>、<code>ListPopupWindow</code>、<code>RecyclerView</code>、<code>ViewPager</code>、<code>ViewPager2</code></p><p>在 Kotlin 中你能够更加方便地创建一个数据适配器。</p><p>现在，你只需要一个数据数组和一个自定义的适配器布局，就可以非常快速地创建一个适配器并绑定到上述这些组件上。</p><p>为 <code>ListView</code>、<code>AutoCompleteTextView</code>、<code>ListPopupWindow</code> 创建一个 <code>BaseAdapter</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的实体类</span></span>
<span class="line"><span style="color:#F47067;">data</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> iconRes: </span><span style="color:#F69D50;">Int</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> name: </span><span style="color:#F69D50;">String</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你需要绑定的数据集</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> listData </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ArrayList</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 创建并绑定到自定义的 BaseAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> listView.</span><span style="color:#DCBDFB;">bindAdapter</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定数据集</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindData</span><span style="color:#ADBAC7;"> { listData }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定自定义适配器布局 adapter_custom.xml</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterCustomBinding</span><span style="color:#ADBAC7;">&gt; { binding, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.iconView.</span><span style="color:#DCBDFB;">setImageResource</span><span style="color:#ADBAC7;">(bean.iconRes)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.textView.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bean.name</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置每项条目的点击事件</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onItemViewsClick</span><span style="color:#ADBAC7;"> { itemView, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你希望手动创建一个适配器并绑定到上述组件上，请参考以下示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 手动创建一个 BaseAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">CommonAdapter</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt;(context) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 内容与上述相同</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 然后绑定到 listView</span></span>
<span class="line"><span style="color:#ADBAC7;">listView.adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> adapter</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为 <code>ViewPager</code> 创建一个 <code>PagerAdapter</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的实体类</span></span>
<span class="line"><span style="color:#F47067;">data</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> iconRes: </span><span style="color:#F69D50;">Int</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> name: </span><span style="color:#F69D50;">String</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你需要绑定的数据集</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> listData </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ArrayList</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 创建并绑定到自定义的 PagerAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewPager.</span><span style="color:#DCBDFB;">bindAdapter</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定数据集</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindData</span><span style="color:#ADBAC7;"> { listData }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定自定义适配器布局 adapter_custom.xml</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterCustomBinding</span><span style="color:#ADBAC7;">&gt; { binding, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.iconView.</span><span style="color:#DCBDFB;">setImageResource</span><span style="color:#ADBAC7;">(bean.iconRes)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.textView.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bean.name</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你也可以直接使用 <code>dataSetCount</code> 来不指定数据集，仅重复创建多个页面。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 创建并绑定到自定义的 PagerAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewPager.</span><span style="color:#DCBDFB;">bindAdapter</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 手动创建两个相同的页面</span></span>
<span class="line"><span style="color:#ADBAC7;">    dataSetCount </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">2</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定自定义适配器布局 adapter_custom.xml</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterCustomBinding</span><span style="color:#ADBAC7;">&gt; { binding, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 你可以通过 position 判断当前页面的位置</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.iconView.</span><span style="color:#DCBDFB;">setImageResource</span><span style="color:#ADBAC7;">(bean.iconRes)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.textView.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bean.name</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你也可以复用 <code>onBindViews</code> 方法来创建多个不同的页面，页面顺序按照创建顺序决定。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 创建并绑定到自定义的 PagerAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewPager.</span><span style="color:#DCBDFB;">bindAdapter</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定自定义适配器布局 adapter_custom_1.xml</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterCustom1Binding</span><span style="color:#ADBAC7;">&gt; { binding, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.iconView.</span><span style="color:#DCBDFB;">setImageResource</span><span style="color:#ADBAC7;">(bean.iconRes)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.textView.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bean.name</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定自定义适配器布局 adapter_custom_2.xml</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterCustom2Binding</span><span style="color:#ADBAC7;">&gt; { binding, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.iconView.</span><span style="color:#DCBDFB;">setImageResource</span><span style="color:#ADBAC7;">(bean.iconRes)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.textView.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bean.name</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建的页面数量为复用 <code>onBindViews</code> 方法的次数。</p><div class="custom-container danger"><p class="custom-container-title">特别注意</p><p>如果你复用 <code>onBindViews</code> 方法创建了多个不同页面，你不能再指定 <code>dataSetCount</code> 或绑定数据集。</p></div><p>如果你需要处理 <code>PagerAdapter</code> 中的 <code>getPageTitle</code>、<code>getPageWidth</code>，你可以使用 <code>PagerMediator</code> 来完成。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 创建并绑定到自定义的 PagerAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewPager.</span><span style="color:#DCBDFB;">bindAdapter</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定每项的 PagerMediator</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindMediators</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 处理页面的标题</span></span>
<span class="line"><span style="color:#ADBAC7;">        title </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">  </span><span style="color:#F47067;">when</span><span style="color:#ADBAC7;"> (position) {</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;主页&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#F47067;">else</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;附加页&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">        }</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 处理页面的宽度 (比例)</span></span>
<span class="line"><span style="color:#ADBAC7;">        width </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">when</span><span style="color:#ADBAC7;"> (position) {</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">1f</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#F47067;">else</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0.5f</span></span>
<span class="line"><span style="color:#ADBAC7;">        }</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// ...</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你希望手动创建一个 <code>PagerAdapter</code> 并绑定到 <code>ViewPager</code> 上，请参考以下示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 手动创建一个 PagerAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">PagerAdapter</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt;(context) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 内容与上述相同</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 然后绑定到 viewPager</span></span>
<span class="line"><span style="color:#ADBAC7;">viewPager.adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> adapter</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为 <code>RecyclerView</code>、<code>ViewPager2</code> 创建一个常规的 <code>RecyclerView.Adapter</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的实体类</span></span>
<span class="line"><span style="color:#F47067;">data</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> iconRes: </span><span style="color:#F69D50;">Int</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> name: </span><span style="color:#F69D50;">String</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你需要绑定的数据集</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> listData </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ArrayList</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 创建并绑定到自定义的 RecyclerView.Adapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> recyclerView.</span><span style="color:#DCBDFB;">bindAdapter</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定数据集</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindData</span><span style="color:#ADBAC7;"> { listData }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定自定义适配器布局 adapter_custom.xml</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterCustomBinding</span><span style="color:#ADBAC7;">&gt; { binding, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.iconView.</span><span style="color:#DCBDFB;">setImageResource</span><span style="color:#ADBAC7;">(bean.iconRes)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.textView.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bean.name</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置每项条目的点击事件</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onItemViewsClick</span><span style="color:#ADBAC7;"> { itemView, viewType, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为 <code>RecyclerView</code>、<code>ViewPager2</code> 创建一个多 <code>View</code> 类型的 <code>RecyclerView.Adapter</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的实体类</span></span>
<span class="line"><span style="color:#F47067;">data</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> iconRes: </span><span style="color:#F69D50;">Int</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> name: </span><span style="color:#F69D50;">String</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> title: </span><span style="color:#F69D50;">String</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> dataType: </span><span style="color:#F69D50;">Int</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你需要绑定的数据集</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> listData </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ArrayList</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 创建并绑定到自定义的 RecyclerView.Adapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> recyclerView.</span><span style="color:#DCBDFB;">bindAdapter</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定数据集</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindData</span><span style="color:#ADBAC7;"> { listData }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定 View 类型</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindViewsType</span><span style="color:#ADBAC7;"> { bean, position </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> bean.dataType }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定自定义适配器布局 adapter_custom_1.xml</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterCustom1Binding</span><span style="color:#ADBAC7;">&gt;(viewType </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;">) { binding, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.iconView.</span><span style="color:#DCBDFB;">setImageResource</span><span style="color:#ADBAC7;">(bean.iconRes)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.textView.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bean.name</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定自定义适配器布局 adapter_custom_2.xml</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterCustom2Binding</span><span style="color:#ADBAC7;">&gt;(viewType </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">2</span><span style="color:#ADBAC7;">) { binding, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.iconView.</span><span style="color:#DCBDFB;">setImageResource</span><span style="color:#ADBAC7;">(bean.iconRes)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.titleView.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bean.title</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置每项条目的点击事件</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onItemViewsClick</span><span style="color:#ADBAC7;"> { itemView, viewType, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为 <code>RecyclerView</code> 创建头部 <code>View</code> 和末位 <code>View</code>。</p><p>你可以使用 <code>onBindHeaderView</code> 和 <code>onBindFooterView</code> 方法来添加一个头部 <code>View</code> 和末位 <code>View</code>，这是两个特殊的条目布局，它们不会被计算入绑定的数据中，且通过 <code>onBindViews</code> 等方法回调的下标 <code>position</code> 不受影响。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>你只能同时添加一个头部 <code>View</code> 和一个末位 <code>View</code>。</p></div><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的实体类</span></span>
<span class="line"><span style="color:#F47067;">data</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> iconRes: </span><span style="color:#F69D50;">Int</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> name: </span><span style="color:#F69D50;">String</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你需要绑定的数据集</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> listData </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ArrayList</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 创建并绑定到自定义的 RecyclerView.Adapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> recyclerView.</span><span style="color:#DCBDFB;">bindAdapter</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定数据集</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindData</span><span style="color:#ADBAC7;"> { listData }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定头部 View</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindHeaderView</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterHeaderBinding</span><span style="color:#ADBAC7;">&gt; { binding </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.someText.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Header&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定末位 View</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindFooterView</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterFooterBinding</span><span style="color:#ADBAC7;">&gt; { binding </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.someText.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Footer&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定自定义适配器布局 adapter_custom.xml</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AdapterCustomBinding</span><span style="color:#ADBAC7;">&gt; { binding, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.iconView.</span><span style="color:#DCBDFB;">setImageResource</span><span style="color:#ADBAC7;">(bean.iconRes)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.textView.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bean.name</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你希望手动创建一个 <code>RecyclerView.Adapter</code> 并绑定到 <code>RecyclerView</code>、<code>ViewPager2</code> 上，请参考以下示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 手动创建一个 RecyclerView.Adapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">RecyclerAdapter</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt;(context) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 内容与上述相同</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 手动创建一个列表装饰器</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> cosmetic </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RecyclerCosmetic.</span><span style="color:#DCBDFB;">fromLinearVertical</span><span style="color:#ADBAC7;">(context)</span></span>
<span class="line"><span style="color:#768390;">// 然后绑定到 recyclerView</span></span>
<span class="line"><span style="color:#ADBAC7;">recyclerView.layoutManager </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> cosmetic.layoutManager</span></span>
<span class="line"><span style="color:#ADBAC7;">recyclerView.</span><span style="color:#DCBDFB;">addItemDecoration</span><span style="color:#ADBAC7;">(cosmetic.itemDecoration) </span></span>
<span class="line"><span style="color:#ADBAC7;">recyclerView.adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> adapter</span></span>
<span class="line"><span style="color:#768390;">// 绑定到 viewPager2 时你无需设置 layoutManager</span></span>
<span class="line"><span style="color:#ADBAC7;">viewPager2.</span><span style="color:#DCBDFB;">addItemDecoration</span><span style="color:#ADBAC7;">(cosmetic.itemDecoration) </span></span>
<span class="line"><span style="color:#ADBAC7;">viewPager2.adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> adapter</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>BetterAndroid</code> 为开发者针对 <code>RecyclerView</code> 预置了几种常用的适配器布局类型以供你使用。</p><p>你可以在方法参数中指定一个 <code>RecyclerCosmetic</code> (列表装饰器)，默认为线性纵向列表装饰器。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 创建一个线性纵向列表，行间距为 10dp</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> lvCosmetic </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RecyclerCosmetic.</span><span style="color:#DCBDFB;">fromLinearVertical</span><span style="color:#ADBAC7;">(context, </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 创建一个九宫格纵向列表，列间距为 10dp，行间距为 10dp</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> gvCosmetic </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RecyclerCosmetic.</span><span style="color:#DCBDFB;">fromGridVertical</span><span style="color:#ADBAC7;">(context, </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context), </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 以 lvCosmetic 举例</span></span>
<span class="line"><span style="color:#768390;">// 使用 bindAdapter 绑定到 recyclerView</span></span>
<span class="line"><span style="color:#ADBAC7;">recyclerView.</span><span style="color:#DCBDFB;">bindAdapter</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt;(lvCosmetic) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// ...</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 或者，手动绑定</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">RecyclerAdapter</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">CustomBean</span><span style="color:#ADBAC7;">&gt;(context) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// ...</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#ADBAC7;">recyclerView.layoutManager </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> lvCosmetic.layoutManager</span></span>
<span class="line"><span style="color:#ADBAC7;">recyclerView.</span><span style="color:#DCBDFB;">addItemDecoration</span><span style="color:#ADBAC7;">(lvCosmetic.itemDecoration)</span></span>
<span class="line"><span style="color:#ADBAC7;">recyclerView.adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> adapter</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>如果你只需要一个 <code>ItemDecoration</code>，你可以通过预置的 <code>LinearHorizontalItemDecoration</code>、<code>LinearVerticalItemDecoration</code>、<code>GridVerticalItemDecoration</code> 来创建。</p><p>以下是一个简单的示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 创建一个线性纵向 ItemDecoration，行间距为 10dp</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> itemDecoration </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">LinearVerticalItemDecoration</span><span style="color:#ADBAC7;">(rowSpacing </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 设置到 recyclerView</span></span>
<span class="line"><span style="color:#ADBAC7;">recyclerView.</span><span style="color:#DCBDFB;">addItemDecoration</span><span style="color:#ADBAC7;">(itemDecoration)</span></span>
<span class="line"><span style="color:#768390;">// 如果你需要更新 ItemDecoration 的参数，你可以使用 update 方法</span></span>
<span class="line"><span style="color:#ADBAC7;">itemDecoration.</span><span style="color:#DCBDFB;">update</span><span style="color:#ADBAC7;">(rowSpacing </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">15</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 然后通知 recyclerView 更新</span></span>
<span class="line"><span style="color:#ADBAC7;">recyclerView.</span><span style="color:#DCBDFB;">invalidateItemDecorations</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>除了上述示例中使用 <code>ViewBinding</code> 的方式之外，你还可以使用传统的 <code>View</code> 或一个布局资源 ID 来绑定其到适配器布局。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 绑定自定义适配器布局 adapter_custom.xml</span></span>
<span class="line"><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">(R.layout.adapter_custom) { view, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    view.</span><span style="color:#DCBDFB;">findViewById</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">ImageView</span><span style="color:#ADBAC7;">&gt;(R.id.icon_view).</span><span style="color:#DCBDFB;">setImageResource</span><span style="color:#ADBAC7;">(bean.iconRes)</span></span>
<span class="line"><span style="color:#ADBAC7;">    view.</span><span style="color:#DCBDFB;">findViewById</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">TextView</span><span style="color:#ADBAC7;">&gt;(R.id.text_view).text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bean.name</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的自定义 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapterView: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 绑定自定义适配器布局到 adapterView</span></span>
<span class="line"><span style="color:#DCBDFB;">onBindViews</span><span style="color:#ADBAC7;">(adapterView) { view, bean, position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为 <code>ViewPager</code> 创建一个 <code>FragmentPagerAdapter</code>。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这种用法已被官方弃用，如果可能，请开始使用 <code>ViewPager2</code>。</p></div><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 创建并绑定到自定义的 FragmentPagerAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewPager.</span><span style="color:#DCBDFB;">bindFragments</span><span style="color:#ADBAC7;">(activity) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置需要显示的 Fragment 个数</span></span>
<span class="line"><span style="color:#ADBAC7;">    pageCount </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">5</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定每个 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindFragments</span><span style="color:#ADBAC7;"> { position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">when</span><span style="color:#ADBAC7;"> (position) {</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FirstFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">SecondFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">2</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ThirdFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">3</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FourthFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#F47067;">else</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FifthFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">        }</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>与 <code>FragmentPagerAdapter</code> 的构造方法使用方法相同，你还可以自定义其中的 <code>behavior</code> 参数。</p><p>如果你正在 <code>Fragment</code> 中使用，你可以在 <code>bindFragments</code> 的第一位参数中填入当前 <code>Fragment</code> 实例，将会自动绑定到 <code>getChildFragmentManager()</code>。</p><p>如果你希望手动创建一个 <code>FragmentPagerAdapter</code> 并绑定到 <code>ViewPager</code> 上，请参考以下示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 手动创建一个 FragmentPagerAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FragmentPagerAdapter</span><span style="color:#ADBAC7;">(activity) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 内容与上述相同</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 然后绑定到 viewPager</span></span>
<span class="line"><span style="color:#ADBAC7;">viewPager.adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> adapter</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为 <code>ViewPager2</code> 创建一个 <code>FragmentStateAdapter</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 创建并绑定到自定义的 FragmentPagerAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewPager2.</span><span style="color:#DCBDFB;">bindFragments</span><span style="color:#ADBAC7;">(activity) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置需要显示的 Fragment 个数</span></span>
<span class="line"><span style="color:#ADBAC7;">    pageCount </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">5</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 绑定每个 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">onBindFragments</span><span style="color:#ADBAC7;"> { position </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">when</span><span style="color:#ADBAC7;"> (position) {</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FirstFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">SecondFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">2</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ThirdFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">3</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FourthFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#F47067;">else</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FifthFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">        }</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你正在 <code>Fragment</code> 中使用，你可以在 <code>bindFragments</code> 的第一位参数中填入当前 <code>Fragment</code> 实例，将会自动绑定到 <code>getChildFragmentManager()</code>。</p><p>如果你希望手动创建一个 <code>FragmentPagerAdapter</code> 并绑定到 <code>ViewPager2</code> 上，请参考以下示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 手动创建一个 FragmentStateAdapter</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FragmentStateAdapter</span><span style="color:#ADBAC7;">(activity) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 内容与上述相同</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 然后绑定到 viewPager2</span></span>
<span class="line"><span style="color:#ADBAC7;">viewPager2.adapter </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> adapter</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="系统事件" tabindex="-1"><a class="header-anchor" href="#系统事件" aria-hidden="true">#</a> 系统事件</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.backpress/-back-pressed-controller" target="_blank" rel="noopener noreferrer">BackPressedController<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>返回事件控制器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.backpress.callback/-on-back-pressed-callback" target="_blank" rel="noopener noreferrer">OnBackPressedCallback<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>简单返回事件回调。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.proxy/-i-back-pressed-controller" target="_blank" rel="noopener noreferrer">IBackPressedController<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>返回事件控制器接口。</p></div><p>在 <code>androidx</code> 的依赖 <code>androidx.activity:activity</code> 中已经为开发者提供了一个 <code>OnBackPressedDispatcher</code>。</p><p>但是出于对官方贸然作废重写 <code>onBackPressed</code> 方法的不满，<code>BetterAndroid</code> 对 <code>OnBackPressedDispatcher</code> 相关功能进行了封装， 支持了更适用于 Kotlin 写法的返回事件回调功能，同时添加了忽略全部回调事件直接释放返回事件的功能，使其变得更加灵活好用。</p><p><code>AppBindingActivity</code>、<code>AppViewsActivity</code>、<code>AppComponentActivity</code>、<code>AppBindingFragment</code>、<code>AppViewsFragment</code> 已经默认实现了 <code>IBackPressedController</code> 接口，你可以直接使用 <code>backPressed</code> 获取 <code>BackPressedController</code>。</p><p>但是你依然可以在 <code>Activity</code> 中手动创建一个 <code>BackPressedController</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourActivity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">AppCompatActivity</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 创建一个懒加载对象</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> backPressed </span><span style="color:#F47067;">by</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">lazy</span><span style="color:#ADBAC7;"> { BackPressedController.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">) }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#DCBDFB;">setContentView</span><span style="color:#ADBAC7;">(R.layout.activity_main)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 在这里调用 backPressed 实现相关功能</span></span>
<span class="line"><span style="color:#ADBAC7;">        backPressed</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onDestroy</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onDestroy</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 销毁 backPressed，这会移除所有回调事件</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 可选，防止内存泄漏</span></span>
<span class="line"><span style="color:#ADBAC7;">        backPressed.</span><span style="color:#DCBDFB;">destroy</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面是 <code>BackPressedController</code> 的基本用法。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 添加一个返回回调</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> callback </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> backPressed.</span><span style="color:#DCBDFB;">addCallback</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在回调内忽略当前回调并触发返回操作</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 例如你可以在此处弹出一个对话框询问用户是否退出且此时选择了 “是”</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 传入的对象需要为创建此回调的 backPressed</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">trigger</span><span style="color:#ADBAC7;">(backPressed)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 或者在触发后同时移除自身</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">trigger</span><span style="color:#ADBAC7;">(backPressed, removed </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 直接移除 (不推荐，你应该使用 backPressed.removeCallback)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">remove</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 你也可以手动创建一个回调</span></span>
<span class="line"><span style="color:#768390;">// 注意：请确保引入 com.highcapable.betterandroid.ui.component.backpress.callback</span></span>
<span class="line"><span style="color:#768390;">//      包名下的 OnBackPressedCallback，而不是 androidx.activity.OnBackPressedCallback</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> callback </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">OnBackPressedCallback</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 然后添加到 backPressed</span></span>
<span class="line"><span style="color:#ADBAC7;">backPressed.</span><span style="color:#DCBDFB;">addCallback</span><span style="color:#ADBAC7;">(callback)</span></span>
<span class="line"><span style="color:#768390;">// 移除一个已知的回调</span></span>
<span class="line"><span style="color:#ADBAC7;">backPressed.</span><span style="color:#DCBDFB;">removeCallback</span><span style="color:#ADBAC7;">(callback)</span></span>
<span class="line"><span style="color:#768390;">// 触发系统的返回操作</span></span>
<span class="line"><span style="color:#ADBAC7;">backPressed.</span><span style="color:#DCBDFB;">trigger</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你可以设置 ignored 为 true 来忽略所有已添加的回调直接返回</span></span>
<span class="line"><span style="color:#ADBAC7;">backPressed.</span><span style="color:#DCBDFB;">trigger</span><span style="color:#ADBAC7;">(ignored </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 判断当前是否存在已启用的回调</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> hasEnabledCallbacks </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> backPressed.hasEnabledCallbacks</span></span>
<span class="line"><span style="color:#768390;">// 销毁，这会移除所有回调事件</span></span>
<span class="line"><span style="color:#ADBAC7;">backPressed.</span><span style="color:#DCBDFB;">destroy</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在使用 <code>BackPressedController</code> 后，当前的 <code>OnBackPressedDispatcher</code> 已被其自动接管， 你不应该继续使用 <code>onBackPressedDispatcher.addCallback(...)</code>，这会造成存在未知的 (野生的) 回调导致无法干净地移除它们。</p></div><h3 id="通知" tabindex="-1"><a class="header-anchor" href="#通知" aria-hidden="true">#</a> 通知</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.notification/-notification-builder" target="_blank" rel="noopener noreferrer">NotificationBuilder<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>系统通知构建器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.notification/-notification-channel-builder" target="_blank" rel="noopener noreferrer">NotificationChannelBuilder<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>系统通知渠道构建器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.notification/-notification-channel-group-builder" target="_blank" rel="noopener noreferrer">NotificationChannelGroupBuilder<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>系统通知渠道组构建器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.notification.type/-notification-importance" target="_blank" rel="noopener noreferrer">NotificationImportance<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>系统通知优先级。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.notification/-notification-poster" target="_blank" rel="noopener noreferrer">NotificationPoster<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>系统通知推送器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.notification.factory" target="_blank" rel="noopener noreferrer">Notification<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于通知构建的扩展方法。</p></div><p>想要在 Android 中创建并发送一条通知并不容易，其中最大的问题就在于系统通知的创建复杂、管理混乱且 API 难以简单地兼容旧版本。</p><p>尤其是当开发者看到了 <code>NotificationCompat</code> 以及 <code>NotificationChannelCompat</code> 这两个类时，更是会感到无从下手。</p><p>于是 <code>BetterAndroid</code> 对系统通知相关 API 进行了整体性的封装，基本上覆盖了系统通知中能够用到的所有功能和调用。</p><p>所以你不需要再考虑类似通知渠道这样 Android 8 及以下系统的兼容性问题，<code>BetterAndroid</code> 已经为你处理了这些问题。</p><p>在 Kotlin 中你能够更加方便地创建一条系统通知。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 创建需要推送的通知对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> notification </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">createNotification</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 创建并设置通知渠道</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在 Android 8 及以上系统中必须存在一个通知渠道</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在低于 Android 8 的系统中，此功能会被自动兼容化处理</span></span>
<span class="line"><span style="color:#ADBAC7;">    channel </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">NotificationChannel</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;my_channel_id&quot;</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 设置通知渠道名称 (这会显示在系统的通知设置中)</span></span>
<span class="line"><span style="color:#ADBAC7;">        name </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Channel&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 设置通知渠道描述 (这会显示在系统的通知设置中)</span></span>
<span class="line"><span style="color:#ADBAC7;">        description </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My channel description.&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 其余用法与 NotificationChannelCompat.Builder 保持一致</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置通知小图标 (这将会显示在状态栏和通知栏中)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 通知小图标必须为单色图标 (建议为矢量图)</span></span>
<span class="line"><span style="color:#ADBAC7;">    smallIconResId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_my_notification</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置通知标题</span></span>
<span class="line"><span style="color:#ADBAC7;">    contentTitle </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Notification&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置通知内容</span></span>
<span class="line"><span style="color:#ADBAC7;">    contentText </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 其余用法与 NotificationCompat.Builder 保持一致</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 使用默认通知 ID 推送通知</span></span>
<span class="line"><span style="color:#ADBAC7;">notification.</span><span style="color:#DCBDFB;">post</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 使用自定义通知 ID 推送通知</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> notifyId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">1</span></span>
<span class="line"><span style="color:#ADBAC7;">notification.</span><span style="color:#DCBDFB;">post</span><span style="color:#ADBAC7;">(notifyId)</span></span>
<span class="line"><span style="color:#768390;">// 取消当前通知 (这会从系统通知栏中清除这条通知)</span></span>
<span class="line"><span style="color:#ADBAC7;">notification.</span><span style="color:#DCBDFB;">cancel</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 判断当前通知是否已经被取消</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isCanceled </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> notification.isCanceled</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在 Android 13 及以上系统中，你需要为通知定义并添加运行时权限。</p><p>当未正确定义此权限时，调用 <code>post</code> 方法时将自动要求你添加权限到 <code>AndroidManifest.xml</code> 中。</p><p>请参考 <a href="https://developer.android.com/develop/ui/views/notifications/notification-permission" target="_blank" rel="noopener noreferrer">Notification runtime permission<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a>。</p></div><p>你可以使用以下方式在通知渠道中为通知设置优先级。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 创建需要推送的通知对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> notification </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">createNotification</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 创建并设置通知渠道</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在低于 Android 8 的系统中，此功能会被自动兼容化处理</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 优先级决定了通知的重要性，这会影响通知的显示方式</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// BetterAndroid 将 NotificationManager 中的优先级静态变量</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 封装到了 NotificationImportance 中，你可以更方便地设置通知的优先级</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 这里我们设置了 NotificationImportance.HIGH (高优先级)，</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 这将会在系统通知栏中以横幅的形式显示通知并伴随响铃提醒</span></span>
<span class="line"><span style="color:#ADBAC7;">    channel </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">NotificationChannel</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;my_channel_id&quot;</span><span style="color:#ADBAC7;">, importance </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> NotificationImportance.HIGH) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        name </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Channel&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">        description </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My channel description.&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    smallIconResId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_my_notification</span></span>
<span class="line"><span style="color:#ADBAC7;">    contentTitle </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Notification&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    contentText </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 使用默认通知 ID 推送通知</span></span>
<span class="line"><span style="color:#ADBAC7;">notification.</span><span style="color:#DCBDFB;">post</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当遇到多组通知时，你可以使用以下方式创建一组通知渠道。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 创建一个通知渠道组</span></span>
<span class="line"><span style="color:#768390;">// 在低于 Android 8 的系统中，此功能将无作用</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> channelGroup </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">NotificationChannelGroup</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;my_channel_group_id&quot;</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置通知渠道组名称 (这会显示在系统的通知设置中)</span></span>
<span class="line"><span style="color:#ADBAC7;">    name </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Channel Group&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置通知渠道组描述 (这会显示在系统的通知设置中)</span></span>
<span class="line"><span style="color:#ADBAC7;">    description </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My channel group description.&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 创建第一个通知渠道并指定通知渠道组</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> channel1 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">NotificationChannel</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;my_channel_id_1&quot;</span><span style="color:#ADBAC7;">, channelGroup) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    name </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Channel 1&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    description </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My channel description.&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 创建第二个通知渠道并指定通知渠道组</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> channel2 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">NotificationChannel</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;my_channel_id_2&quot;</span><span style="color:#ADBAC7;">, channelGroup) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    name </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Channel 2&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    description </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My channel description.&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 使用 channel1 创建第一条通知并推送</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">createNotification</span><span style="color:#ADBAC7;">(channel1) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    smallIconResId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_my_notification</span></span>
<span class="line"><span style="color:#ADBAC7;">    contentTitle </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Notification 1&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    contentText </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">}.</span><span style="color:#DCBDFB;">post</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 使用 channel2 创建第二条通知并推送</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">createNotification</span><span style="color:#ADBAC7;">(channel2) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    smallIconResId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_my_notification</span></span>
<span class="line"><span style="color:#ADBAC7;">    contentTitle </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Notification 2&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    contentText </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">}.</span><span style="color:#DCBDFB;">post</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">2</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述内容将创建一个通知渠道组并在其中添加两个通知渠道。</p><p>通知推送后，系统将会自动为这两个通知渠道创建一个组分类。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>通知渠道中的设置仅会在首次创建这个通知渠道时生效，如果通知渠道的设置被用户修改过，那么这些设置将不会再被覆盖。</p><p>你无法修改已经创建的通知渠道设置，但是你可以重新为其分配一个新的通知渠道 ID，这样将会创建一个新的通知渠道。</p><p>请参考 <a href="https://developer.android.com/develop/ui/views/notifications/channels" target="_blank" rel="noopener noreferrer">Create and manage notification channels<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a>。</p></div><p>上方的示例中，通知对象是被自动化管理的，如果你希望手动创建一个通知对象而并不依赖于 <code>context.createNotification</code> 方法，请参考以下示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 创建需要推送的通知对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> notification </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">Notification</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置 Context</span></span>
<span class="line"><span style="color:#ADBAC7;">    context </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 创建并设置通知渠道</span></span>
<span class="line"><span style="color:#ADBAC7;">    channel </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">NotificationChannel</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;my_channel_id&quot;</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        name </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Channel&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">        description </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My channel description.&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    smallIconResId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_my_notification</span></span>
<span class="line"><span style="color:#ADBAC7;">    contentTitle </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;My Notification&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    contentText </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 将当前通知作为推送对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> poster </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> notification.</span><span style="color:#DCBDFB;">asPoster</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 使用默认通知 ID 推送通知</span></span>
<span class="line"><span style="color:#ADBAC7;">poster.</span><span style="color:#DCBDFB;">post</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 使用自定义通知 ID 推送通知</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> notifyId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">1</span></span>
<span class="line"><span style="color:#ADBAC7;">poster.</span><span style="color:#DCBDFB;">post</span><span style="color:#ADBAC7;">(notifyId)</span></span>
<span class="line"><span style="color:#768390;">// 取消当前通知 (这会从系统通知栏中清除这条通知)</span></span>
<span class="line"><span style="color:#ADBAC7;">poster.</span><span style="color:#DCBDFB;">cancel</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 判断当前通知是否已经被取消</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isCanceled </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> poster.isCanceled</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>通过 <code>Notification</code>、<code>NotificationChannel</code>、<code>NotificationChannelGroup</code> 创建的对象是对 <code>NotificationCompat</code>、<code>NotificationChannelCompat</code>、<code>NotificationChannelGroupCompat</code> 的一个包装，你可以使用 <code>instance</code> 来得到其中的实际对象以进行一些你自己的操作。</p><p>你还可以通过 <code>Context.notificationManager</code> 来获取到 <code>NotificationManagerCompat</code> 对象以进行一些你自己的操作。</p></div><h3 id="边衬区-insets" tabindex="-1"><a class="header-anchor" href="#边衬区-insets" aria-hidden="true">#</a> 边衬区 (Insets)</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.insets/-window-insets-wrapper" target="_blank" rel="noopener noreferrer">WindowInsetsWrapper<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>WindowInsets</code> 的包装器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.insets/-window-insets-wrapper/-absolute" target="_blank" rel="noopener noreferrer">WindowInsetsWrapper.Absolute<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>WindowInsetsWrapper</code> 的绝对 Insets 对象。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.insets/-insets-wrapper" target="_blank" rel="noopener noreferrer">InsetsWrapper<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>Insets</code> 的包装器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.insets.factory" target="_blank" rel="noopener noreferrer">Insets<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>Insets</code>、<code>WindowInsets</code> 的扩展方法。</p></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>“边衬区” 是来自 <a href="https://developer.android.com/develop/ui/views/layout/insets?hl=zh-cn" target="_blank" rel="noopener noreferrer">Android 开发者文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 的简体中文翻译，请以英文原版的 Insets 为准。</p></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在 <code>1.0.3</code> 及之前版本的依赖中，<code>BetterAndroid</code> 将 Insest、Window Insets 与 <a href="#%E7%B3%BB%E7%BB%9F%E6%A0%8F-%E7%8A%B6%E6%80%81%E6%A0%8F%E3%80%81%E5%AF%BC%E8%88%AA%E6%A0%8F%E7%AD%89">系统栏 (状态栏、导航栏等)</a> 封装在了一起， 这是曾经不正确的做法，目前对于 Insets、Window Insets 已被解耦合为独立的功能，正如你现在所看到的。</p></div><p>Insets 和 Window Insets 在 Android 中是一个非常重要的概念，虽然这个 API 早在 Android 5.0 就已经存在了，但是在 Android 10 中才被官方正式推荐使用。(自 Android 9 开始，系统加入了异形屏处理的相关 API)</p><p>Insets 是一个特殊的空间，它代表 “附着” 在视图四周的占位区域，而诸如异形屏 (刘海屏) 遮挡的部分、状态栏、导航栏以及输入法等系统持有的 Insets 则称为 Window Insets。</p><p><code>BetterAndroid</code> 所做的主要就是对这套 API 进行了封装，使其更加易用。</p><p>下面，你可以通过一个存在的 <code>WindowInsets</code> 对象来创建一个 <code>WindowInsetsWrapper</code> 对象。</p><div class="custom-container tip"><p class="custom-container-title">小提示</p><p><code>WindowInsetsWrapper</code> 是参照 Jetpack Compose 官方提供的 <a href="https://developer.android.com/jetpack/compose/layouts/insets" target="_blank" rel="noopener noreferrer">Window Insets API<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 设计的，你能够更加有好的在原生层面上使用这套 API。</p></div><p>出于对向下兼容的考虑，<code>WindowInsetsWrapper</code> 封装的对象为 <code>WindowInsetsCompat</code> 并建议使用它而不是 <code>WindowInsets</code>。</p><p><code>WindowInsetsWrapper</code> 封装了 <code>WindowInsetsCompat.getInsets</code>、<code>WindowInsetsCompat.getInsetsIgnoringVisibility</code>、<code>WindowInsetsCompat.isVisible</code> 等方法， 你无需再为了获取一个 Insets 对象而写超级长的 <code>WindowInsetsCompat.getInsets(WindowInsetsCompat.Type.systemBars())</code> 等代码。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你的 WindowInsets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> windowInsets: </span><span style="color:#F69D50;">WindowInsetsCompat</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 WindowInsetsWrapper</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> windowInsets.</span><span style="color:#DCBDFB;">createWrapper</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你还可以通过 from 方法来创建</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> WindowInsetsWrapper.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(windowInsets)</span></span>
<span class="line"><span style="color:#768390;">// 获取系统栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper.systemBars</span></span>
<span class="line"><span style="color:#768390;">// 通常情况下，获取到的 Insets 会包含它的可见性，</span></span>
<span class="line"><span style="color:#768390;">// 在不可见的情况下，Insets 的值全部为 0</span></span>
<span class="line"><span style="color:#768390;">// 你可以通过参数 ignoringVisibility 来忽略可见性</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper.</span><span style="color:#DCBDFB;">systemBars</span><span style="color:#ADBAC7;">(ignoreVisibility </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 获取到 Insets 对象后，你可以使用 isVisible 来判断其是否可见</span></span>
<span class="line"><span style="color:#768390;">// 注意：Insets 的值是由系统提供的，isVisible 只是一个状态，</span></span>
<span class="line"><span style="color:#768390;">// 无论其值是否为 0，你都可以使用它来判断当前的 Insets 是否可见</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsIsVisible </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> systemBars.isVisible</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>BetterAndroid</code> 针对 Android 9 以下异形屏设备的主流品牌的厂商各自的私有方案做了一个兼容处理，如果你需要兼容更旧的设备，你可以在方法参数中传入一个可选的 <code>Window</code> 对象。</p><p>如果你的应用程序只需要适配 Android 9 及以上的设备，你可以忽略此参数。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你的 Activity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">Activity</span></span>
<span class="line"><span style="color:#768390;">// 在通常情况下，你可以通过当前 Activity 获取 Window</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> window </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.window</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 WindowInsetsWrapper</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> windowInsets.</span><span style="color:#DCBDFB;">createWrapper</span><span style="color:#ADBAC7;">(window)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以通过 from 方法来创建</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> WindowInsetsWrapper.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(windowInsets, window)</span></span>
<span class="line"><span style="color:#768390;">// 获取异形屏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> displayCutout </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper.displayCutout</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>如果你的应用程序需要在 Android 10 或以下设备上运行，我们建议始终传入一个 <code>Window</code> 对象以保证 <code>BetterAndroid</code> 能正确为你处理兼容问题。</p><p>目前已知兼容问题为 <code>androidx</code> 提供的兼容处理方法无法对 Android 11 以下设备的 <code>statusBars</code>、<code>navigationBars</code>、<code>systemBars</code> 的 <code>isVisible</code> 和其内容给出正确的值，<code>BetterAndroid</code> 为此进行了修复。</p></div><p>你从 <code>WindowInsetsWrapper</code> 获取到的任何 Insets 对象即 <code>InsetsWrapper</code>，它封装了 <code>Insets</code> 对象并实现了可控的 <code>isVisible</code> 状态。</p><p><code>InsetsWrapper</code> 可以轻松地转换为原始的 <code>Insets</code> 对象，同时也可以重新转换为 <code>InsetsWrapper</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 获取系统栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper.systemBars</span></span>
<span class="line"><span style="color:#768390;">// 转换为 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> systemBars.</span><span style="color:#DCBDFB;">toInsets</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 转换为 InsetsWrapper</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> wrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets.</span><span style="color:#DCBDFB;">toWrapper</span><span style="color:#ADBAC7;">(systemBars.isVisible)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以通过 of 方法来创建</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> wrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> InsetsWrapper.</span><span style="color:#DCBDFB;">of</span><span style="color:#ADBAC7;">(insets, systemBars.isVisible)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>与 <code>Insets</code> 不同的是，<code>InsetsWrapper</code> 重载了运算符，你可以使用 <code>+</code>、<code>-</code> 以及 <code>or</code>、<code>and</code> 来对其进行运算或是对其进行比较。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets1 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> InsetsWrapper.</span><span style="color:#DCBDFB;">of</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets2 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> InsetsWrapper.</span><span style="color:#DCBDFB;">of</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">20</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">20</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">20</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">20</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;+&quot; 运算符，等同于 Insets.add(insets1, insets2)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets3 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets1 </span><span style="color:#F47067;">+</span><span style="color:#ADBAC7;"> insets2</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;-&quot; 运算符，等同于 Insets.subtract(insets2, insets1)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets3 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets2 </span><span style="color:#F47067;">-</span><span style="color:#ADBAC7;"> insets1</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;or&quot; 运算符，等同于 Insets.max(insets1, insets2)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets3 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets1 or insets2</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;and&quot; 运算符，等同于 Insets.min(insets1, insets2)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets3 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets1 and insets2</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;&gt;&quot; 运算符进行比较</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isUpperTo </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets1 </span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> insets2</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;&lt;&quot; 运算符进行比较</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isLowerTo </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets1 </span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;"> insets2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取到 Insets 对象后，一般做法是设置为 <code>View</code> 的 <code>padding</code>，让其为系统占位置的地方 “让路”。</p><p>无论是 <code>InsetsWrapper</code> 还是 <code>Insets</code>，你都不需要使用诸如 <code>View.setPadding(insets.left, insets.top, insets.right, insets.bottom)</code> 这样的形式，这看起来及其不友好。</p><p>你可以使用以下方式来轻松地将它直接设置为 <code>View</code> 的 <code>padding</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你当前的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 获取系统栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper.systemBars</span></span>
<span class="line"><span style="color:#768390;">// 使用 Insets 设置 View 的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">setInsetsPadding</span><span style="color:#ADBAC7;">(systemBars)</span></span>
<span class="line"><span style="color:#768390;">// 由于这里演示的对象是系统栏，你可以仅更新纵向 (上下) 的 padding</span></span>
<span class="line"><span style="color:#768390;">// 使用 updateInsetsPadding 方法的作用同 updatePadding</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updateInsetsPadding</span><span style="color:#ADBAC7;">(systemBars, vertical </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面我们说到了，要创建一个 <code>WindowInsetsWrapper</code> 对象，你需要一个已存在的 <code>WindowInsetsCompat</code> 对象。</p><p>出于对向下兼容的考虑，你可以使用 <code>ViewCompat.setOnApplyWindowInsetsListener</code> 来为 <code>View</code> 设置一个改变监听。</p><p>它的实质作用是控制 Window Insets 的传递，Window Insets 通过 <code>View.onApplyWindowInsets</code> 方法由根视图向子视图传递， 直到你使用 <code>WindowInsetsCompat.CONSUMED</code> 来明确消费掉它才会停止传递。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你当前的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 设置 View 的 Window Insets 改变监听</span></span>
<span class="line"><span style="color:#ADBAC7;">ViewCompat.</span><span style="color:#DCBDFB;">setOnApplyWindowInsetsListener</span><span style="color:#ADBAC7;">(view) { view, insets </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// insets 就是当前的 WindowInsetsCompat 对象</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 你可以通过它创建 WindowInsetsWrapper</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets.</span><span style="color:#DCBDFB;">createWrapper</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在最后一位消费掉 Window Insets，将停止继续向下传递</span></span>
<span class="line"><span style="color:#ADBAC7;">    WindowInsetsCompat.CONSUMED </span><span style="color:#768390;">// 或者填入当前的 insets 继续向下传递</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样的做法看起来会很麻烦，所以 <code>BetterAndroid</code> 同样为你提供了一个更加简单的方法。</p><p>例如，我们需要得知输入法所占的空间并为输入法布局设置来自 Window Insets 的 <code>padding</code>。</p><p>此时你可以使用 <code>View.handleOnWindowInsetsChanged</code> 直接得到一个 <code>WindowInsetsWrapper</code> 对象。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的输入法布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> imeSpaceLayout: </span><span style="color:#F69D50;">FrameLayout</span></span>
<span class="line"><span style="color:#768390;">// 处理 View 的 Window Insets 改变监听</span></span>
<span class="line"><span style="color:#ADBAC7;">imeSpaceLayout.</span><span style="color:#DCBDFB;">handleOnWindowInsetsChanged</span><span style="color:#ADBAC7;"> { imeSpaceLayout, insetsWrapper </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置由 ime 提供的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">    imeSpaceLayout.</span><span style="color:#DCBDFB;">setInsetsPadding</span><span style="color:#ADBAC7;">(insetsWrapper.ime)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 或者使用 ime 更新底部的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">    imeSpaceLayout.</span><span style="color:#DCBDFB;">updateInsetsPadding</span><span style="color:#ADBAC7;">(insetsWrapper.ime, bottom </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你想对子视图消费掉 Window Insets 使其不再向下传递，你只需要在方法参数中设置 <code>consumed = true</code> 即可。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 处理 View 的 Window Insets 改变监听</span></span>
<span class="line"><span style="color:#ADBAC7;">imeSpaceLayout.</span><span style="color:#DCBDFB;">handleOnWindowInsetsChanged</span><span style="color:#ADBAC7;">(consumed </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">) { imeSpaceLayout, insetsWrapper </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 内容与上述相同</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你想同时在 Window Insets 改变时使其拥有动画效果，你无需重新设置一个 <code>View.setWindowInsetsAnimationCallback</code>。</p><p>你只需要在方法参数中设置 <code>animated = true</code> 即可，这样回调就会在每次 Window Insets 改变中触发。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 处理 View 的 Window Insets 改变监听</span></span>
<span class="line"><span style="color:#ADBAC7;">imeSpaceLayout.</span><span style="color:#DCBDFB;">handleOnWindowInsetsChanged</span><span style="color:#ADBAC7;">(animated </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">) { imeSpaceLayout, insetsWrapper </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 内容与上述相同</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这个特性是从 Android 11 开始引入的，在这之前的系统中回调依然会被立即触发，所以将不会产生任何动画效果。</p></div><p>另外，当你设置了 Window Insets 改变的监听后，你不需要关心监听是何时设置的，你可以在任何时候移除它们。</p><p>这个操作会移除所有 <code>View.setOnApplyWindowInsetsListener</code>、<code>View.setWindowInsetsAnimationCallback</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你当前的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 移除 View 的 Window Insets 改变监听</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">removeWindowInsetsListener</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>你只能为一个 <code>View</code> 设置一个 Window Insets 监听，重复设置的监听会被最后一次覆盖掉。</p></div><p>如果你想直接从当前 <code>View</code> 中获取 Window Insets，那么你还可以使用以下方式创建一个 <code>WindowInsetsWrapper</code> 对象。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你当前的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 WindowInsetsWrapper</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">createRootWindowInsetsWrapper</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你还可以通过 from 方法来创建</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> WindowInsetsWrapper.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(view)</span></span>
<span class="line"><span style="color:#768390;">// 获取系统栏的 Insets</span></span>
<span class="line"><span style="color:#768390;">// 如果无法通过 View 获取到 Window Insets，将会返回 null</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper?.systemBars</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除了上述做法，<code>WindowInsetsWrapper</code> 还提供了一个 <code>WindowInsetsWrapper.Absolute</code> 对象，你可以无需通过任何监听即可直接通过 <code>Window.getDecorView</code> 获取到一个绝对的 Insets 对象。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你的 Activity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">Activity</span></span>
<span class="line"><span style="color:#768390;">// 在通常情况下，你可以通过当前 Activity 获取 Window</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> window </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.window</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 WindowInsetsWrapper.Absolute</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> absoluteWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> WindowInsetsWrapper.Absolute.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(window)</span></span>
<span class="line"><span style="color:#768390;">// 获取状态栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> statusBar </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> absoluteWrapper.statusBar</span></span>
<span class="line"><span style="color:#768390;">// 获取导航栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> navigationBar </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> absoluteWrapper.navigationBar</span></span>
<span class="line"><span style="color:#768390;">// 获取系统栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> absoluteWrapper.systemBars</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这种方式获取到的值仅供参考，我们并不推荐这样去获取 Insets 对象，在当前为异形屏设备时，这些值可能会不准确。</p></div><p>以下是 <code>WindowInsetsWrapper</code> 中提供的全部 Insets。</p><table><thead><tr><th>Insets</th><th>描述</th></tr></thead><tbody><tr><td><code>statusBars</code></td><td>状态栏</td></tr><tr><td><code>navigationBars</code></td><td>导航栏</td></tr><tr><td><code>captionBar</code></td><td>标题栏</td></tr><tr><td><code>systemBars</code></td><td>系统栏 (<code>captionBar</code> + <code>statusBars</code> + <code>navigationBars</code>)</td></tr><tr><td><code>ime</code></td><td>输入法</td></tr><tr><td><code>tappableElement</code></td><td>可点击元素</td></tr><tr><td><code>systemGestures</code></td><td>系统手势</td></tr><tr><td><code>mandatorySystemGestures</code></td><td>强制系统手势</td></tr><tr><td><code>displayCutout</code></td><td>异形屏 (刘海屏)</td></tr><tr><td><code>waterFall</code></td><td>瀑布屏 (曲面屏)</td></tr><tr><td><code>safeGestures</code></td><td>安全手势 (<code>systemGestures</code> + <code>mandatorySystemGestures</code> + <code>waterFall</code> + <code>tappableElement</code>)</td></tr><tr><td><code>safeDrawing</code></td><td>安全绘制 (<code>displayCutout</code> + <code>systemBars</code> + <code>ime</code>)</td></tr><tr><td><code>safeDrawingIgnoringIme</code></td><td>安全绘制 (不包括 <code>ime</code>) (<code>displayCutout</code> + <code>systemBars</code>)</td></tr><tr><td><code>safeContent</code></td><td>安全内容 (<code>safeDrawing</code> + <code>safeGestures</code>)</td></tr></tbody></table><p>以下是 <code>WindowInsetsWrapper.Absolute</code> 中提供的全部 Insets。</p><table><thead><tr><th>Insets</th><th>描述</th></tr></thead><tbody><tr><td><code>statusBars</code></td><td>状态栏</td></tr><tr><td><code>navigationBars</code></td><td>导航栏</td></tr><tr><td><code>systemBars</code></td><td>系统栏 (<code>statusBars</code> + <code>navigationBars</code>)</td></tr></tbody></table><h3 id="系统栏-状态栏、导航栏等" tabindex="-1"><a class="header-anchor" href="#系统栏-状态栏、导航栏等" aria-hidden="true">#</a> 系统栏 (状态栏、导航栏等)</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.systembar/-system-bars-controller" target="_blank" rel="noopener noreferrer">SystemBarsController<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>系统栏控制器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.proxy/-i-system-bars-controller" target="_blank" rel="noopener noreferrer">ISystemBarsController<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>系统栏控制器接口。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.systembar.style/-system-bar-style" target="_blank" rel="noopener noreferrer">SystemBarStyle<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>系统栏的样式。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.systembar.type/-system-bars" target="_blank" rel="noopener noreferrer">SystemBars<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>系统栏的类型。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-component/ui-component/com.highcapable.betterandroid.ui.component.systembar.type/-system-bar-behavior" target="_blank" rel="noopener noreferrer">SystemBarBehavior<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>系统栏的行为。</p></div><p>Android 开发的严重适配问题就在于终端设备没有统一开发规范的混乱性。</p><p>为了给用户带来更好的体验，状态栏、导航栏何时应该显示、隐藏，状态栏、导航栏的颜色、背景等等，这些都是开发者在开发过程中需要考虑的问题。</p><p>所以 <code>BetterAndroid</code> 对接并封装了 <code>androidx</code> 所提供的系统栏适配方案，并将其集成到了 <code>SystemBarsController</code> 中，现在，你可以非常方便地来调用它去轻松实现操作系统栏的一系列解决方案。</p><p><code>SystemBarsController</code> 最低支持到 Android 5.0，并解决了部分厂商定制系统中的兼容性问题。</p><p><code>AppBindingActivity</code>、<code>AppViewsActivity</code>、<code>AppComponentActivity</code>、<code>AppBindingFragment</code>、<code>AppViewsFragment</code> 已经默认实现了 <code>ISystemBarsController</code> 接口，你可以直接使用 <code>systemBars</code> 获取 <code>SystemBarsController</code>。</p><p>但是你依然可以在 <code>Activity</code> 中使用 <code>Activity.getWindow</code> 对象手动创建一个 <code>SystemBarsController</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourActivity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">AppCompatActivity</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 创建一个懒加载对象</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">by</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">lazy</span><span style="color:#ADBAC7;"> { SystemBarsController.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(window) }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 创建你的 binding</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> binding </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> ActivityMainBinding.</span><span style="color:#DCBDFB;">inflate</span><span style="color:#ADBAC7;">(layoutInflater)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#DCBDFB;">setContentView</span><span style="color:#ADBAC7;">(binding.root)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 使用当前根布局初始化 systemBars</span></span>
<span class="line"><span style="color:#ADBAC7;">        systemBars.</span><span style="color:#DCBDFB;">init</span><span style="color:#ADBAC7;">(binding.root)</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onDestroy</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onDestroy</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 销毁 systemBars，这会还原初始化之前的状态</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 可选，防止内存泄漏</span></span>
<span class="line"><span style="color:#ADBAC7;">        systemBars.</span><span style="color:#DCBDFB;">destroy</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在使用 <code>init</code> 方法时，推荐并建议传入你自己的根布局，否则将默认使用 <code>android.R.id.content</code> 作为根布局。</p><p>你<u><strong>应该避免使用它作为根布局</strong></u>，这是不可控的，你应该做到在 <code>Activity</code> 中能够随时维护一个自己的根布局。</p><p>如果你并未使用 <code>ViewBinding</code>，<code>AppViewsActivity</code>、<code>AppComponentActivity</code> 已经默认为你重写了 <code>setContentView</code> 方法， 它会在你使用这个方法的时候自动装载你的根布局到 <code>SystemBarsController</code> 中。</p><p>你也可以手动重写 <code>setContentView</code> 方法来实现这个功能。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">setContentView</span><span style="color:#ADBAC7;">(layoutResID: </span><span style="color:#F69D50;">Int</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">setContentView</span><span style="color:#ADBAC7;">(layoutResID)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 第一位子布局即你的根布局</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> rootView </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">findViewById</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">ViewGroup</span><span style="color:#ADBAC7;">&gt;(android.R.id.content).</span><span style="color:#DCBDFB;">getChildAt</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 使用当前根布局初始化 systemBars</span></span>
<span class="line"><span style="color:#ADBAC7;">    systemBars.</span><span style="color:#DCBDFB;">init</span><span style="color:#ADBAC7;">(rootView)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>下面是 <code>SystemBarsController</code> 的详细用法介绍。</p><p>初始化 <code>SystemBarsController</code> 及处理根布局的 Window Insets <code>padding</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你当前的根布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> rootView: </span><span style="color:#F69D50;">ViewGroup</span></span>
<span class="line"><span style="color:#768390;">// 初始化 SystemBarsController</span></span>
<span class="line"><span style="color:#768390;">// 你的根布局必须已经被设置到了一个父布局中，否则将会抛出异常</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">init</span><span style="color:#ADBAC7;">(rootView)</span></span>
<span class="line"><span style="color:#768390;">// 你可以自定义处理根布局的 Window Insets</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">init</span><span style="color:#ADBAC7;">(rootView, edgeToEdgeInsets </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> { systemBars })</span></span>
<span class="line"><span style="color:#768390;">// 如果你不希望 SystemBarsController 自动为你处理根布局的 Window Insets，</span></span>
<span class="line"><span style="color:#768390;">// 你可以直接设置 edgeToEdgeInsets 为 null</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">init</span><span style="color:#ADBAC7;">(rootView, edgeToEdgeInsets </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">null</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p><code>SystemBarsController</code> 初始化时会自动设置 <code>Window.setDecorFitsSystemWindows(false)</code> (在异形屏设备上会同时设置 <code>layoutInDisplayCutoutMode</code> 为 <code>LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES</code>)， 你只要在 <code>init</code> 中设置了 <code>edgeToEdgeInsets</code> (默认设置)， 那么你的根布局将会拥有一个 <code>safeDrawingIgnoringIme</code> 控制的 Window Insets <code>padding</code>，这也是为什么你应该做到在 <code>Activity</code> 中能够随时维护一个自己的根布局。</p><p>如果你在 <code>init</code> 中将 <code>edgeToEdgeInsets</code> 设为了 <code>null</code>，那么你的根布局将会完全扩展到全屏。</p><p>以上效果等同于 <code>androidx.activity:activity</code> 中提供的 <code>enableEdgeToEdge</code>。</p><p>在不做出任何操作的情况下，你的布局就会被系统栏或系统的危险区域 (例如异形屏的挖空处) 遮挡，这会影响用户体验。</p><p>如果你想自己维护并管理当前根布局的 <code>padding</code>，你必须确保你的界面元素能够正确适应 Window Insets 提供的间距，你可以前往上一节的 <a href="#%E8%BE%B9%E8%A1%AC%E5%8C%BA-insets">边衬区 (Insets)</a> 了解更多关于 Window Insets 的内容。</p><p>你不再需要使用 <code>enableEdgeToEdge</code>，<code>SystemBarsController</code> 初始化后默认将持有此效果，你应该使用 <code>edgeToEdgeInsets</code> 来控制根布局的 Window Insets <code>padding</code>。</p></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>在 Jetpack Compose 中，你可以使用 <code>AppComponentActivity</code> 来获得一个设置了 <code>edgeToEdgeInsets = null</code> 初始化的 <code>SystemBarsController</code>， 然后使用 Jetpack Compose 的方式去设置 Window Insets，<code>BetterAndroid</code> 同样为其提供了扩展支持，更多功能你可以参考 <a href="/BetterAndroid/zh-cn/library/compose-multiplatform.html" class="">compose-multiplatform</a>。</p></div><p>设置系统栏的行为。</p><p>这决定了显示或隐藏系统栏时由系统控制的行为。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#ADBAC7;">systemBars.behavior </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> SystemBarBehavior.SHOW_TRANSIENT_BARS_BY_SWIPE</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以下是 <code>SystemBarBehavior</code> 中提供的全部行为，标有 <code>*</code> 的为默认行为。</p><table><thead><tr><th>行为</th><th>描述</th></tr></thead><tbody><tr><td><code>DEFAULT</code></td><td>由系统控制的默认行为</td></tr><tr><td>*<code>SHOW_TRANSIENT_BARS_BY_SWIPE</code></td><td>在全屏时可由手势滑动弹出并显示为半透明的系统栏，并在一段时间后继续隐藏</td></tr></tbody></table><p>显示、隐藏系统栏。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 进入沉浸模式 (全屏模式)</span></span>
<span class="line"><span style="color:#768390;">// 同时隐藏状态栏和导航栏</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">hide</span><span style="color:#ADBAC7;">(SystemBars.ALL)</span></span>
<span class="line"><span style="color:#768390;">// 单独控制状态栏和导航栏</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">hide</span><span style="color:#ADBAC7;">(SystemBars.STATUS_BARS)</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">hide</span><span style="color:#ADBAC7;">(SystemBars.NAVIGATION_BARS)</span></span>
<span class="line"><span style="color:#768390;">// 退出沉浸模式 (全屏模式)</span></span>
<span class="line"><span style="color:#768390;">// 同时显示状态栏和导航栏</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">show</span><span style="color:#ADBAC7;">(SystemBars.ALL)</span></span>
<span class="line"><span style="color:#768390;">// 单独控制状态栏和导航栏</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">show</span><span style="color:#ADBAC7;">(SystemBars.STATUS_BARS)</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">show</span><span style="color:#ADBAC7;">(SystemBars.NAVIGATION_BARS)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>如果你需要控制输入法 (IME) 的显示与隐藏，你可以参考 <a href="/BetterAndroid/zh-cn/library/ui-extension.html#view-%E6%89%A9%E5%B1%95" class="">ui-extension → View 扩展</a>。</p></div><p>设置系统栏的样式。</p><p>你可以自定义状态栏、导航栏的外观。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在 Android 6.0 以下系统中，状态栏的内容不支持反色，如果你设置了亮色则会自动处理为半透明遮罩，但是对于 MIUI、Flyme 自行添加了反色功能的系统将使用其私有方案实现反色效果。</p><p>在 Android 8 以下系统中，导航栏的内容不支持反色，处理方式同上。</p></div><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 设置状态栏的样式</span></span>
<span class="line"><span style="color:#768390;">// 注意：请确保引入 com.highcapable.betterandroid.ui.component.systembar.style</span></span>
<span class="line"><span style="color:#768390;">//      包名下的 SystemBarStyle，而不是 androidx.activity.SystemBarStyle</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.statusBarStyle </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">SystemBarStyle</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置背景颜色</span></span>
<span class="line"><span style="color:#ADBAC7;">    color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置内容颜色</span></span>
<span class="line"><span style="color:#ADBAC7;">    darkContent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 设置导航栏的样式</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.navigationBarStyle </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">SystemBarStyle</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置背景颜色</span></span>
<span class="line"><span style="color:#ADBAC7;">    color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置内容颜色</span></span>
<span class="line"><span style="color:#ADBAC7;">    darkContent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你可以一次性设置状态栏和导航栏的样式</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">setStyle</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    statusBar </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">SystemBarStyle</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">        color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE,</span></span>
<span class="line"><span style="color:#ADBAC7;">        darkContent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"><span style="color:#ADBAC7;">    ),</span></span>
<span class="line"><span style="color:#ADBAC7;">    navigationBar </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">SystemBarStyle</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">        color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE,</span></span>
<span class="line"><span style="color:#ADBAC7;">        darkContent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"><span style="color:#ADBAC7;">    )</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你也可以同时设置状态栏和导航栏的样式</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">setStyle</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    style </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">SystemBarStyle</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">        color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE,</span></span>
<span class="line"><span style="color:#ADBAC7;">        darkContent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"><span style="color:#ADBAC7;">    )</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下是 <code>SystemBarStyle</code> 中提供的预置样式，标有 <code>*</code> 的为默认样式。</p><table><thead><tr><th>样式</th><th>描述</th></tr></thead><tbody><tr><td><code>Auto</code></td><td>系统深色模式下为纯黑背景 + 浅色内容颜色，浅色模式下为纯白背景 + 深色内容颜色</td></tr><tr><td>*<code>AutoTransparent</code></td><td>系统深色模式下为浅色内容颜色，浅色模式下为深色内容颜色，背景透明</td></tr><tr><td><code>Light</code></td><td>纯白背景 + 深色内容颜色</td></tr><tr><td><code>LightScrim</code></td><td>半透明纯白背景 + 深色内容颜色</td></tr><tr><td><code>LightTransparent</code></td><td>透明背景 + 深色内容颜色</td></tr><tr><td><code>Dark</code></td><td>纯黑背景 + 浅色内容颜色</td></tr><tr><td><code>DarkScrim</code></td><td>半透明纯黑背景 + 浅色内容颜色</td></tr><tr><td><code>DarkTransparent</code></td><td>透明背景 + 浅色内容颜色</td></tr></tbody></table><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>在应用程序首次冷启动时，系统栏的颜色将跟随你在 <code>styles.xml</code> 中设置的属性而决定。</p><p>为了能在冷启动时带来更好的用户体验，你可以参考以下示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#ADBAC7;">&lt;</span><span style="color:#8DDB8C;">style</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;Theme.MyApp.Demo&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">parent</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">&lt;!-- 设置状态栏颜色 --&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    &lt;</span><span style="color:#8DDB8C;">item</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;android:statusBarColor&quot;</span><span style="color:#ADBAC7;">&gt;@color/colorPrimary&lt;/</span><span style="color:#8DDB8C;">item</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">&lt;!-- 设置导航栏颜色 --&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    &lt;</span><span style="color:#8DDB8C;">item</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;android:navigationBarColor&quot;</span><span style="color:#ADBAC7;">&gt;@color/colorPrimary&lt;/</span><span style="color:#8DDB8C;">item</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">&lt;!-- 设置状态栏内容颜色 --&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    &lt;</span><span style="color:#8DDB8C;">item</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;android:windowLightStatusBar&quot;</span><span style="color:#ADBAC7;">&gt;true&lt;/</span><span style="color:#8DDB8C;">item</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">&lt;!-- 设置导航栏内容颜色 --&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    &lt;</span><span style="color:#8DDB8C;">item</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;android:windowLightNavigationBar&quot;</span><span style="color:#ADBAC7;">&gt;true&lt;/</span><span style="color:#8DDB8C;">item</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">&lt;/</span><span style="color:#8DDB8C;">style</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>销毁 <code>SystemBarsController</code>。</p><p>这会还原初始化之前的状态，包括初始化之前的状态栏、导航栏颜色等。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 销毁 SystemBarsController，这会还原初始化之前的状态</span></span>
<span class="line"><span style="color:#ADBAC7;">systemBars.</span><span style="color:#DCBDFB;">destroy</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你可以随时使用 isDestroyed 判断当前 SystemBarsController 是否已被销毁</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isDestroyed </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> systemBars.isDestroyed</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在使用 <code>SystemBarsController</code> 后，当前根布局 <code>rootView</code> 的 <code>WindowInsetsController</code> 已被其自动接管， 请不要手动设置 <code>WindowInsetsController</code> 中的 <code>isAppearanceLightStatusBars</code>、<code>isAppearanceLightNavigationBars</code> 等参数， 这可能会导致 <code>statusBarStyle</code>、<code>navigationBarStyle</code>、<code>setStyle</code> 等功能的实际效果显示异常。</p></div></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/BetterAndroid/BetterAndroid/edit/main/docs-source/src/zh-cn/library/ui-component.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: qzmmcn@163.com">fankesyooni</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/BetterAndroid/zh-cn/library/ui-extension.html" class="" aria-label="ui-extension"><!--[--><!--]--> ui-extension <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/BetterAndroid/assets/app-ltPCiGOj.js" defer></script>
  </body>
</html>
