import{_ as p,r as t,o as r,c,a as s,b as n,d as e,w as i,e as o}from"./app-ltPCiGOj.js";const d={},u=o(`<h1 id="ui-extension" tabindex="-1"><a class="header-anchor" href="#ui-extension" aria-hidden="true">#</a> ui-extension</h1><p><img src="https://img.shields.io/maven-central/v/com.highcapable.betterandroid/ui-extension?logo=apachemaven&amp;logoColor=orange" alt="Maven Central"><span style="margin-left:5px;"></span><img src="https://img.shields.io/badge/Min SDK-21-orange?logo=android" alt="Android Min SDK"></p><p>这是针对 UI (用户界面) 相关功能扩展的一个依赖。</p><h2 id="配置依赖" tabindex="-1"><a class="header-anchor" href="#配置依赖" aria-hidden="true">#</a> 配置依赖</h2><p>你可以使用如下方式将此模块添加到你的项目中。</p><h3 id="sweetdependency-推荐" tabindex="-1"><a class="header-anchor" href="#sweetdependency-推荐" aria-hidden="true">#</a> SweetDependency (推荐)</h3><p>在你的项目 <code>SweetDependency</code> 配置文件中添加依赖。</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#8DDB8C;">libraries</span><span style="color:#ADBAC7;">:</span></span>
<span class="line"><span style="color:#ADBAC7;">  </span><span style="color:#8DDB8C;">com.highcapable.betterandroid</span><span style="color:#ADBAC7;">:</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#8DDB8C;">ui-extension</span><span style="color:#ADBAC7;">:</span></span>
<span class="line"><span style="color:#ADBAC7;">      </span><span style="color:#8DDB8C;">version</span><span style="color:#ADBAC7;">: </span><span style="color:#96D0FF;">+</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在你的项目 <code>build.gradle.kts</code> 中配置依赖。</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#DCBDFB;">implementation</span><span style="color:#ADBAC7;">(com.highcapable.betterandroid.ui.extension)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="传统方式" tabindex="-1"><a class="header-anchor" href="#传统方式" aria-hidden="true">#</a> 传统方式</h3><p>在你的项目 <code>build.gradle.kts</code> 中配置依赖。</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#DCBDFB;">implementation</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.highcapable.betterandroid:ui-extension:&lt;version&gt;&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>请将 <code>&lt;version&gt;</code> 修改为此文档顶部显示的版本。</p><h2 id="功能介绍" tabindex="-1"><a class="header-anchor" href="#功能介绍" aria-hidden="true">#</a> 功能介绍</h2>`,15),y={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension",target:"_blank",rel:"noopener noreferrer"},A=s("h3",{id:"activity-扩展",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#activity-扩展","aria-hidden":"true"},"#"),n(" Activity 扩展")],-1),v={class:"custom-container tip"},b=s("p",{class:"custom-container-title"},"本节内容",-1),m={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/start-activity",target:"_blank",rel:"noopener noreferrer"},D={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/start-activity-or-else",target:"_blank",rel:"noopener noreferrer"},B={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/is-in-multi-window-mode-compat",target:"_blank",rel:"noopener noreferrer"},h=s("p",null,[n("适用于 "),s("code",null,"Activity"),n(" 的扩展。")],-1),C=o(`<p>我们需要启动另一个 <code>Activity</code> 时，需要使用 <code>Intent</code> 创建一个 <code>Intent(this, AnotherActivity::class.java)</code>，然后调用 <code>startActivity(intent)</code> 来启动。</p><p>这样写起来大概不太友好，于是 <code>BetterAndroid</code> 为 <code>Activity</code> 提供了扩展，现在你可以直接使用以下方式来启动另一个 <code>Activity</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 假设 AnotherActivity 就是你的目标 Activity</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AnotherActivity</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 你可以使用以下方式创建一个 Intent 对象</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AnotherActivity</span><span style="color:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在这里添加一些额外的参数</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">putExtra</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;key&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;value&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 如果你需要使用 Intent.FLAG_ACTIVITY_NEW_TASK 来启动另一个 Activity，</span></span>
<span class="line"><span style="color:#768390;">// 你可以直接这样使用</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AnotherActivity</span><span style="color:#ADBAC7;">&gt;(newTask </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你需要启动一个外部应用程序的 <code>Activity</code>，你可以使用以下方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 假设你需要启动的应用程序包名为 com.example.app</span></span>
<span class="line"><span style="color:#768390;">// 假设你需要启动的 Activity 类名为 com.example.app.MainActivity</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.example.app&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;com.example.app.MainActivity&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你依然可以使用以下方式创建一个 Intent 对象</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.example.app&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;com.example.app.MainActivity&quot;</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在这里添加一些额外的参数</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">putExtra</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;key&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;value&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// Intent.FLAG_ACTIVITY_NEW_TASK 将会在此方法中默认设置，这是为了避免启动新的应用程序后顶栈重叠，</span></span>
<span class="line"><span style="color:#768390;">// 如果你不需要考虑这个问题，你可以将 newTask 参数设置为 false</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.example.app&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;com.example.app.MainActivity&quot;</span><span style="color:#ADBAC7;">, newTask </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">false</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你不知道需要启动的应用程序的入口 <code>Activity</code> 名称，你可以使用包名直接启动它。</p><p>此方法内部将会使用 <code>getLaunchIntentForPackage</code> 来获取入口 <code>Activity</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 假设你需要启动的应用程序包名为 com.example.app</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.example.app&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),g={class:"custom-container warning"},F=s("p",{class:"custom-container-title"},"注意",-1),x=s("p",null,[n("此操作在 Android 11 及之后需要 "),s("code",null,"QUERY_ALL_PACKAGES"),n(" 权限或明确配置一个 "),s("code",null,"queries"),n(" 属性列表。")],-1),k={href:"https://developer.android.com/training/package-visibility",target:"_blank",rel:"noopener noreferrer"},_=o(`<div class="custom-container tip"><p class="custom-container-title">小提示</p><p>你可以使用 <code>startActivityOrElse</code> 来代替 <code>startActivity</code> 以判断 <code>Activity</code> 是否能够启动成功，启动失败时此方法不会抛出异常，而是返回 <code>false</code>。</p></div><p>针对 Android 7.0 及之后的版本新增的分屏模式，<code>BetterAndroid</code> 为其提供了一个兼容扩展。</p><p>对于 <code>isInMultiWindowMode</code>，你无需考虑版本兼容问题，你只需要在后方加入一个 <code>Compat</code> 即可。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Activity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">Activity</span></span>
<span class="line"><span style="color:#768390;">// 获取当前是否处于分屏模式</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isInMultiWindowMode </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.isInMultiWindowModeCompat</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fragment-扩展" tabindex="-1"><a class="header-anchor" href="#fragment-扩展" aria-hidden="true">#</a> Fragment 扩展</h3>`,6),w={class:"custom-container tip"},f=s("p",{class:"custom-container-title"},"本节内容",-1),V={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/fragment-manager",target:"_blank",rel:"noopener noreferrer"},T={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/find-fragment",target:"_blank",rel:"noopener noreferrer"},q={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/attach-to-activity",target:"_blank",rel:"noopener noreferrer"},I={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/attach-to-fragment",target:"_blank",rel:"noopener noreferrer"},K={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/detach-from-activity",target:"_blank",rel:"noopener noreferrer"},R={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/detach-from-fragment",target:"_blank",rel:"noopener noreferrer"},P={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/replace-from-activity",target:"_blank",rel:"noopener noreferrer"},S={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/replace-from-fragment",target:"_blank",rel:"noopener noreferrer"},L={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/hide",target:"_blank",rel:"noopener noreferrer"},M={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/show",target:"_blank",rel:"noopener noreferrer"},E=s("p",null,[n("适用于 "),s("code",null,"Fragment"),n(" 的扩展。")],-1),G=s("p",null,[s("code",null,"Fragment"),n(" 是官方提供的针对 "),s("code",null,"Activity"),n(" 的一个高效片段，但是它的使用方式并不是很友好。")],-1),N=s("p",null,[n("为了对 "),s("code",null,"Fragment"),n(" 相关操作进行简化，"),s("code",null,"BetterAndroid"),n(" 为 "),s("code",null,"Fragment"),n(" 提供了一些实用的扩展功能。")],-1),W=s("code",null,"BetterAndroid",-1),O=s("code",null,"androidx.fragment:fragment-ktx",-1),Y={href:"https://developer.android.com/kotlin/ktx#fragment",target:"_blank",rel:"noopener noreferrer"},H=o(`<div class="custom-container warning"><p class="custom-container-title">注意</p><p>在 <code>1.0.2</code> 及之前版本中的 <code>commitTransaction</code> 方法已被弃用，本着 “不重复造轮子” 的原则，请迁移到 <code>fragment-ktx</code> 依赖中的 <code>commit</code>、<code>commitNow</code> 方法。</p></div><p>获取存在的 <code>FragmentManager</code>。</p><p><code>BetterAndroid</code> 为 <code>FragmentActivity</code> 和 <code>Fragment</code> 提供了一个更加友好的方式来获取存在的 <code>FragmentManager</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment: </span><span style="color:#F69D50;">Fragment</span></span>
<span class="line"><span style="color:#768390;">// 从 FragmentActivity 获取 FragmentManager</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragmentManager </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.</span><span style="color:#DCBDFB;">fragmentManager</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 从 Fragment 获取 FragmentManager</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragmentManager </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> fragment.</span><span style="color:#DCBDFB;">fragmentManager</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 对于 Fragment，你可以设置参数 parent 为 true 来获取父 FragmentManager</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parentFragmentManager </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> fragment.</span><span style="color:#DCBDFB;">fragmentManager</span><span style="color:#ADBAC7;">(parent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用泛型的方式来查找一个存在的 <code>Fragment</code>。</p><p>它可以自动帮你把找到的 <code>Fragment</code> 转换为当前类型而不需要再使用 <code>as</code> 的形式进行强制转换。</p><p>你完全不需要担心找不到或者类型错误的情况，遇到这种情况将会返回 <code>null</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 通过 ID 查找一个 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.</span><span style="color:#DCBDFB;">fragmentManager</span><span style="color:#ADBAC7;">().</span><span style="color:#DCBDFB;">findFragment</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">YourFragment</span><span style="color:#ADBAC7;">&gt;(R.id.container)</span></span>
<span class="line"><span style="color:#768390;">// 通过 TAG 查找一个 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.</span><span style="color:#DCBDFB;">fragmentManager</span><span style="color:#ADBAC7;">().</span><span style="color:#DCBDFB;">findFragment</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">YourFragment</span><span style="color:#ADBAC7;">&gt;(</span><span style="color:#96D0FF;">&quot;your_fragment_tag&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>绑定 <code>Fragment</code> 到 <code>FragmentActivity</code>。</p><p>你可以不需要使用类似 <code>FragmentManger.beginTransaction</code>...<code>commit</code> 的方式进行，现在完成这个操作将会更加简单。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attachToActivity</span><span style="color:#ADBAC7;">(activity)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>是的，这样你就完成了全部的绑定操作，在默认情况下，它会将 <code>Fragment</code> 绑定到 <code>Activity</code> 通过 <code>setContentView</code> 设置的布局中。</p><p>如果你需要将其绑定到一个自定义的布局中，你可以使用以下方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment 到 ID 为 R.id.container 的布局中</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attachToActivity</span><span style="color:#ADBAC7;">(activity, R.id.container)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果这个自定义的布局不是通过 ID 得到的，而是一个 <code>View</code> 对象，你可以使用以下方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> container: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment 到 container (这个 View 必须有一个 ID)</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attachToActivity</span><span style="color:#ADBAC7;">(activity, view </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> container)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还可以方便地为 <code>Fragment</code> 设置绑定时的入场动画。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment 并设置入场动画</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attachToActivity</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    activity </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity,</span></span>
<span class="line"><span style="color:#ADBAC7;">    viewId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.id.container,</span></span>
<span class="line"><span style="color:#ADBAC7;">    animId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.anim.slide_in_right </span><span style="color:#768390;">// 入场动画</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>绑定 <code>Fragment</code> 到 <code>Fragment</code>。</p><p>一个 <code>Fragment</code> 也可以绑定到另一个 <code>Fragment</code> 中，形成嵌套关系。</p><p>此时你只需要把 <code>attachToActivity</code> 换成 <code>attachToFragment</code> 即可。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的父 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parentFragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourParentFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attachToFragment</span><span style="color:#ADBAC7;">(parentFragment)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从 <code>FragmentActivity</code> 解绑 <code>Fragment</code>。</p><p>你同样可以非常方便地解绑 <code>Fragment</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 从 FragmentActivity 解绑 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">detachFromActivity</span><span style="color:#ADBAC7;">(activity)</span></span>
<span class="line"><span style="color:#768390;">// 如果你不填写参数，则默认获取当前 Fragment 所在的 Activity</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">detachFromActivity</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从 <code>Fragment</code> 解绑 <code>Fragment</code>。</p><p>此时你只需要把 <code>detachFromActivity</code> 换成 <code>detachFromFragment</code> 即可。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的父 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parentFragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourParentFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 从父 Fragment 解绑 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">detachFromFragment</span><span style="color:#ADBAC7;">(parentFragment)</span></span>
<span class="line"><span style="color:#768390;">// 如果你不填写参数，则默认获取当前 Fragment 所在的父 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">detachFromFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除了绑定，你还能够在同一个绑定的布局中替换掉一个 <code>Fragment</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 替换 Fragment 到 ID 为 R.id.container 的布局中</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">replaceFromActivity</span><span style="color:#ADBAC7;">(activity, R.id.container)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>Fragment</code> 中替换 <code>Fragment</code>。</p><p>此时你只需要把 <code>replaceFromActivity</code> 换成 <code>replaceFromFragment</code> 即可。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的父 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parentFragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourParentFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 替换 Fragment 到 ID 为 R.id.container 的布局中</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">replaceFromFragment</span><span style="color:#ADBAC7;">(parentFragment, R.id.container)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>隐藏当前 <code>Fragment</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的父 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parentFragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourParentFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 从 FragmentActivity 隐藏 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">hide</span><span style="color:#ADBAC7;">(activity)</span></span>
<span class="line"><span style="color:#768390;">// 从父 Fragment 隐藏 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">hide</span><span style="color:#ADBAC7;">(fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> parentFragment)</span></span>
<span class="line"><span style="color:#768390;">// 如果你不填写参数，则默认获取当前 Fragment 所在的父 Fragment 或 Activity</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">hide</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>显示当前 <code>Fragment</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的父 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parentFragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourParentFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 从 FragmentActivity 显示 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">show</span><span style="color:#ADBAC7;">(activity)</span></span>
<span class="line"><span style="color:#768390;">// 从父 Fragment 显示 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">show</span><span style="color:#ADBAC7;">(fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> parentFragment)</span></span>
<span class="line"><span style="color:#768390;">// 如果你不填写参数，则默认获取当前 Fragment 所在的父 Fragment 或 Activity</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">show</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>任何一个绑定、解绑、替换、显示、隐藏操作都可以被设置过渡动画，你可以在这些方法中找到 <code>animId</code>、<code>enterAnimId</code> 和 <code>exitAnimId</code> 参数，默认将不设置动画效果。</p></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>从 <code>1.0.4</code> 版本开始，<code>BetterAndroid</code> 移除了默认的过渡动画并移除了相关资源文件，我们认为过渡动画应该是每个开发者自行决定的事情，并非工具库所为之。</p></div><h3 id="尺寸-dimension-扩展" tabindex="-1"><a class="header-anchor" href="#尺寸-dimension-扩展" aria-hidden="true">#</a> 尺寸 (Dimension) 扩展</h3>`,53),z={class:"custom-container tip"},U=s("p",{class:"custom-container-title"},"本节内容",-1),X={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/-display-density",target:"_blank",rel:"noopener noreferrer"},j=s("p",null,"对 Density 的友好处理接口。",-1),J={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/to-px",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/to-dp",target:"_blank",rel:"noopener noreferrer"},Z=s("p",null,"适用于 Dimension 的扩展。",-1),$=o(`<p>在 Android 的 UI 中无处不存在着尺寸的问题，例如你需要将一个 <code>View</code> 的 <code>padding</code> 设置为 10dp，在 XML 布局中能够很方便地设置， 但是在代码中你需要使用 <code>TypedValue.applyDimension</code> 来进行转换，这样的代码看起来并不是很友好。</p><p>于是，大家都开始去封装一个形如 <code>dp2px</code> 的方法，但是这样的做法依然不是很优雅且存在问题。</p><p><code>BetterAndroid</code> 为此提供了一个更加优雅的解决方案。</p><p>一般情况下，你只需要传入一个存在的 <code>Context</code> 或 <code>Resources</code> 即可完成转换。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Resources</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> resources: </span><span style="color:#F69D50;">Resources</span></span>
<span class="line"><span style="color:#768390;">// 将 10dp 转换为 px</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> px </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context)</span></span>
<span class="line"><span style="color:#768390;">// 将 10dp 转换为 px</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> px </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(resources)</span></span>
<span class="line"><span style="color:#768390;">// 将 36px 转换为 dp</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> dp </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">36</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toDp</span><span style="color:#ADBAC7;">(context)</span></span>
<span class="line"><span style="color:#768390;">// 将 36px 转换为 dp</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> dp </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">36</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toDp</span><span style="color:#ADBAC7;">(resources)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你当前已经处于一个存在 <code>Context</code> 或 <code>Resources</code> 的环境中，你可以像下面这样写得更加简便一点。</p><p>这个时候你只需要为当前的实例实现一个 <code>DisplayDensity</code> 接口即可，你无需重写任何方法。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourActivity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">AppCompatActivity</span><span style="color:#ADBAC7;">(), </span><span style="color:#DCBDFB;">DisplayDensity</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 将 10dp 转换为 px</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> px </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.dp</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 将 10dp 转换为 px</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> px </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 将 36px 转换为 dp</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> dp </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">36</span><span style="color:#ADBAC7;">.px</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 将 36px 转换为 dp</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> dp </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">36</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toDp</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p><code>DisplayDensity</code> 接口仅支持被实现到以下实例或是被其继承的实例中：</p><p><code>Context</code>、<code>Window</code>、<code>View</code>、<code>Resources</code>、<code>Fragment</code>、<code>Dialog</code></p><p>如果在不支持的实例中使用将会抛出异常，如果你愿意，你也可以重写 <code>DisplayDensity</code> 接口中的方法手动进行支持。</p><p><code>dp</code>、<code>px</code>、<code>toPx</code>、<code>toDp</code> 的命名方式可能会与 Jetpack Compose 中的命名方式冲突，所以不建议在这样的项目中使用。</p></div><h3 id="资源-resources-扩展" tabindex="-1"><a class="header-anchor" href="#资源-resources-扩展" aria-hidden="true">#</a> 资源 (Resources) 扩展</h3>`,12),ss={class:"custom-container tip"},ns=s("p",{class:"custom-container-title"},"本节内容",-1),es={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/theme-res-id",target:"_blank",rel:"noopener noreferrer"},as={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/is-ui-in-night-mode",target:"_blank",rel:"noopener noreferrer"},os={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/to-hex-resource-id",target:"_blank",rel:"noopener noreferrer"},ls={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-drawable-compat",target:"_blank",rel:"noopener noreferrer"},ts={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-color-compat",target:"_blank",rel:"noopener noreferrer"},is={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-color-state-list-compat",target:"_blank",rel:"noopener noreferrer"},ps={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-float-compat",target:"_blank",rel:"noopener noreferrer"},rs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-font-compat",target:"_blank",rel:"noopener noreferrer"},cs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-boolean",target:"_blank",rel:"noopener noreferrer"},ds={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-float",target:"_blank",rel:"noopener noreferrer"},us={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-integer",target:"_blank",rel:"noopener noreferrer"},ys={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-int-array",target:"_blank",rel:"noopener noreferrer"},As={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-string-array",target:"_blank",rel:"noopener noreferrer"},vs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-string",target:"_blank",rel:"noopener noreferrer"},bs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-dimension",target:"_blank",rel:"noopener noreferrer"},ms={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-drawable",target:"_blank",rel:"noopener noreferrer"},Ds={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-color-state-list",target:"_blank",rel:"noopener noreferrer"},Bs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-color",target:"_blank",rel:"noopener noreferrer"},hs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/is-theme-attrs-ids-value-equals",target:"_blank",rel:"noopener noreferrer"},Cs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/has-theme-attrs-id",target:"_blank",rel:"noopener noreferrer"},gs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-id",target:"_blank",rel:"noopener noreferrer"},Fs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-menu-from-resource",target:"_blank",rel:"noopener noreferrer"},xs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-string-array",target:"_blank",rel:"noopener noreferrer"},ks={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-int-array",target:"_blank",rel:"noopener noreferrer"},_s={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-color-or-null",target:"_blank",rel:"noopener noreferrer"},ws={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/obtain-styled-attributes",target:"_blank",rel:"noopener noreferrer"},fs=s("p",null,[n("适用于 "),s("code",null,"Resources"),n(" 的扩展。")],-1),Vs=o(`<p>资源 (Resources) 是 Android 中非常重要的一个部分，它包含了应用程序中需要的布局、图片、字符串等等。</p><p>为了能更加方便地使用 <code>Resources</code>，<code>BetterAndroid</code> 为其提供了一些实用的扩展功能。</p><p>获取 <code>ContextThemeWrapper</code> 中的主题资源 ID。</p><p>通常情况下使用 <code>setTheme</code> 设置的主题资源 ID 是无法直接获取到的，为此 <code>BetterAndroid</code> 通过反射的方式为你提供了一个获取方式。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>此方法可能不会适用于所有设备或兼容所有 Android 版本，请自行测试。</p></div><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 ContextThemeWrapper</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">ContextThemeWrapper</span></span>
<span class="line"><span style="color:#768390;">// 获取已设置的主题资源 ID</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> themeResId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.themeResId</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>针对 <code>Resources</code> 中的 attr 属性，通常情况下我们需要创建一个 <code>TypedValue</code> 对象，然后使用 <code>Context.getTheme().resolveAttribute</code> 来对它填充相应的 ID 以获取到其本身的值内容。</p><p>例如我们需要获取 <code>android.R.attr.windowBackground</code> 的值，我们需要这样去做。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 TypedValue 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> typedValue </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">TypedValue</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 使用 Context.getTheme().resolveAttribute 来填充相应的 ID</span></span>
<span class="line"><span style="color:#ADBAC7;">context.theme.</span><span style="color:#DCBDFB;">resolveAttribute</span><span style="color:#ADBAC7;">(android.R.attr.windowBackground, typedValue, </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 获取所在资源 ID</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> windowBackgroundId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> typedValue.resourceId</span></span>
<span class="line"><span style="color:#768390;">// 获取其本身的值内容</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> windowBackground </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getDrawable</span><span style="color:#ADBAC7;">(windowBackgroundId)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>整个过程下来可谓是非常繁琐，于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><p>现在，你只需要使用以下方式即可获取其本身的值内容。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 获取其本身的值内容</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> windowBackground </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getThemeAttrsDrawable</span><span style="color:#ADBAC7;">(android.R.attr.windowBackground)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你只需要获取 attr 所对应的资源 ID，你可以使用以下方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 获取所在资源 ID</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> windowBackgroundId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getThemeAttrsId</span><span style="color:#ADBAC7;">(android.R.attr.windowBackground)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还可以仅判断 attr 所对应的资源 ID 是否存在。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 判断 attr 所对应的资源 ID 是否存在</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> hasWindowBackgroundId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">hasThemeAttrsId</span><span style="color:#ADBAC7;">(android.R.attr.windowBackground)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还能够比较两个 attr 的值内容是否相等。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 比较两个 attr 的值内容是否相等</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isEquals </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">isThemeAttrsIdsValueEquals</span><span style="color:#ADBAC7;">(R.attr.first_attr, R.attr.second_attr)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p><code>Context.getThemeAttrs*</code> 系列方法支持 Android 中能够被转换到实际资源对象的常用实例，例如 <code>getThemeAttrsColor</code>、<code>getThemeAttrsInteger</code>、<code>getThemeAttrsString</code> 等。</p><p>目前 <code>Context.getThemeAttrs*</code>、<code>Context.isThemeAttrsIdsValueEquals</code> 支持以下常用资源 ID 的值内容：</p><p><code>Color</code>、<code>ColorStateList</code>、<code>Drawable</code>、<code>Dimension</code>、<code>String</code>、<code>StringArray</code>、<code>IntArray</code>、<code>Float</code>、<code>Boolean</code></p></div><p>在 Android 中没有提供直接获取 <code>Menu</code> 资源 ID 并解析为 <code>Menu</code> 对象的方式，为此 <code>BetterAndroid</code> 提供了一个可能的获取方式。</p><p><code>BetterAndroid</code> 封装了使用 <code>PopupMenu</code> 并通过 <code>MenuInflater</code> 的形式将获取到的内容转换为一个 <code>List&lt;MenuItem&gt;</code> 对象的方法。</p><p>现在，你可以非常方便地使用以下方式来获取 <code>Menu</code> 资源 ID 的值内容。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 获取 Menu 资源 ID 的值内容</span></span>
<span class="line"><span style="color:#768390;">// 获取到的内容即为一个 List&lt;MenuItem&gt; 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> menuItems </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getMenuFromResource</span><span style="color:#ADBAC7;">(R.menu.my_menu)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>针对历史版本系统的兼容性处理，<code>BetterAndroid</code> 封装了由 <code>ResourcesCompat</code> 提供的方法，现在，你不需要考虑一些方法被作废的问题， 你只需要在每个方法后加上 <code>Compat</code> 即可自动为其兼容化处理，并能够像原方法一样进行调用，功能完全一致。</p><p>下面是一个针对 <code>Drawable</code> 的兼容性处理示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Resources</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> resources: </span><span style="color:#F69D50;">Resources</span></span>
<span class="line"><span style="color:#768390;">// 通过 Context 获取 Drawable 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> drawable </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getDrawableCompat</span><span style="color:#ADBAC7;">(R.drawable.my_drawable)</span></span>
<span class="line"><span style="color:#768390;">// 通过 Resources 获取 Drawable 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> drawable </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> resources.</span><span style="color:#DCBDFB;">getDrawableCompat</span><span style="color:#ADBAC7;">(R.drawable.my_drawable, context.theme)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以使用泛型的方式将其转换为对应的类型</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> drawable </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getDrawableCompat</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">ColorDrawable</span><span style="color:#ADBAC7;">&gt;(R.drawable.my_background)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下是原始方法与兼容性处理方法的对照表。</p><table><thead><tr><th>原始方法</th><th>兼容性处理方法</th></tr></thead><tbody><tr><td><code>Context.getDrawable</code></td><td><code>Context.getDrawableCompat</code></td></tr><tr><td><code>Context.getColor</code></td><td><code>Context.getColorCompat</code></td></tr><tr><td><code>Context.getColorStateList</code></td><td><code>Context.getColorStateListCompat</code></td></tr><tr><td><code>Context.getFloat</code></td><td><code>Context.getFloatCompat</code></td></tr><tr><td><code>Resources.getDrawable</code></td><td><code>Resources.getDrawableCompat</code></td></tr><tr><td><code>Resources.getColor</code></td><td><code>Resources.getColorCompat</code></td></tr><tr><td><code>Resources.getColorStateList</code></td><td><code>Resources.getColorStateListCompat</code></td></tr><tr><td><code>Resources.getFloat</code></td><td><code>Resources.getFloatCompat</code></td></tr><tr><td><code>Resources.getFont</code></td><td><code>Context.getFontCompat</code></td></tr></tbody></table><p>针对自定义 <code>View</code> 的属性相关功能，<code>BetterAndroid</code> 提供了一个可自动回收处理的 <code>TypedArray</code> 扩展。</p><p>你可以直接使用 <code>obtainStyledAttributes</code> 方法创建一个 <code>TypedArray</code> 对象并无需考虑何时应该调用 <code>recycle</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">MyView</span><span style="color:#ADBAC7;">(context: </span><span style="color:#F69D50;">Context</span><span style="color:#ADBAC7;">, attrs: </span><span style="color:#F69D50;">AttributeSet</span><span style="color:#ADBAC7;">?) : </span><span style="color:#F69D50;">View</span><span style="color:#ADBAC7;">(</span><span style="color:#F69D50;">context</span><span style="color:#ADBAC7;">, </span><span style="color:#F69D50;">attrs</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">init</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#DCBDFB;">obtainStyledAttributes</span><span style="color:#ADBAC7;">(attrs, R.styleable.MyView) {</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myType </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> it.</span><span style="color:#DCBDFB;">getInteger</span><span style="color:#ADBAC7;">(R.styleable.MyView_myType, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">        }</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p><code>BetterAndroid</code> 还为 <code>TypedArray</code> 提供了 <code>getStringArray</code>、<code>getIntArray</code> 以及 <code>getColorOrNull</code> 等实用方法，你可以在上方的 <strong>本节内容</strong> 中找到它们。</p></div><p>系统夜间模式 (Dark Mode) 的功能扩展。</p><p>系统的夜间模式是使用 <code>Configuration.UI_MODE_NIGHT_MASK</code> 进行判断的，为了能让这个功能更加通俗易懂，你无需使用位运算的方式进行判断， 因为通常情况下我们不需要关心当前系统的夜间模式到底处于哪种托管状态，我们只需要知道当前系统外观是否为深色即可。</p><p>所以 <code>BetterAndroid</code> 在 <code>Configuration</code> 中提供了一个直接使用 <code>Boolean</code> 类型进行判断的扩展。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 判断当前系统是否为深色模式</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isDarkMode </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.resources.configuration.isUiInNightMode</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="系统颜色-system-colors" tabindex="-1"><a class="header-anchor" href="#系统颜色-system-colors" aria-hidden="true">#</a> 系统颜色 (System Colors)</h3>`,47),Ts={class:"custom-container tip"},qs=s("p",{class:"custom-container-title"},"本节内容",-1),Is={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.feature/-system-colors",target:"_blank",rel:"noopener noreferrer"},Ks=s("p",null,"适用于系统颜色 (动态主题色) 的扩展。",-1),Rs=o(`<p>在 Android 12 中，官方为我们提供了一个新的功能，即动态主题色 (Dynamic Colors)，不同于传统的壁纸取色，Material 3 中的动态主题色是基于壁纸的层级色调进行计算的。</p><p><code>BetterAndroid</code> 将系统提供的主题色封装为了 <code>SystemColors</code>，你可以在代码层面动态地获取到系统的主题色。</p><p>以下是一个创建 <code>SystemColors</code> 并使用的示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 创建 SystemColors 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemColors </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> SystemColors.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(context)</span></span>
<span class="line"><span style="color:#768390;">// 获取系统提供的 android.R.color.system_accent1_100 的颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> accentColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> systemColors.</span><span style="color:#DCBDFB;">systemAccentPrimary</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">100</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 获取 Material 提供的 com.google.android.material.R.color.material_dynamic_primary50 的颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> primaryColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> systemColors.</span><span style="color:#DCBDFB;">materialDynamicPrimary</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">50</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不是每个搭载了 Android 12 的设备都支持动态主题色，你可以使用以下方式进行判断。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 你可以直接判断当前系统是否支持动态主题色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isAvailable </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> SystemColors.isAvailable</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在不支持的情况下在获取颜色时将返回系统提供的默认颜色，但是如果目标设备低于 Android 12，任何从 <code>SystemColors</code> 中获取到的颜色都将会是 <code>Color.TRANSPARENT</code>。</p><p>以下是完整的 <code>SystemColors</code> 支持的颜色方法及其可用参数列表。</p><table><thead><tr><th>方法名称</th><th>可用参数</th></tr></thead><tbody><tr><td><code>systemAccentPrimary</code></td><td>0、10、50、100、200、300、400、500、600、700、800、900、1000</td></tr><tr><td><code>systemAccentSecondary</code></td><td>0、10、50、100、200、300、400、500、600、700、800、900、1000</td></tr><tr><td><code>systemAccentTertiary</code></td><td>0、10、50、100、200、300、400、500、600、700、800、900、1000</td></tr><tr><td><code>systemNeutralPrimary</code></td><td>0、10、50、100、200、300、400、500、600、700、800、900、1000</td></tr><tr><td><code>systemNeutralSecondary</code></td><td>0、10、50、100、200、300、400、500、600、700、800、900、1000</td></tr><tr><td><code>materialDynamicPrimary</code></td><td>0、10、20、30、40、50、60、70、80、90、95、99、100</td></tr><tr><td><code>materialDynamicSecondary</code></td><td>0、10、20、30、40、50、60、70、80、90、95、99、100</td></tr><tr><td><code>materialDynamicTertiary</code></td><td>0、10、20、30、40、50、60、70、80、90、95、99、100</td></tr><tr><td><code>materialDynamicNeutral</code></td><td>0、10、20、30、40、50、60、70、80、90、95、99、100</td></tr><tr><td><code>materialDynamicNeutralVariant</code></td><td>0、10、20、30、40、50、60、70、80、90、95、99、100</td></tr></tbody></table><div class="custom-container danger"><p class="custom-container-title">特别注意</p><p>你仅能在给出的方法中传入上述所列出可用参数中的数值，其它数值均不支持，否则将会抛出异常。</p></div><h3 id="颜色-color-扩展" tabindex="-1"><a class="header-anchor" href="#颜色-color-扩展" aria-hidden="true">#</a> 颜色 (Color) 扩展</h3>`,13),Ps={class:"custom-container tip"},Ss=s("p",{class:"custom-container-title"},"本节内容",-1),Ls={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/-attr-state",target:"_blank",rel:"noopener noreferrer"},Ms=s("p",null,[n("基于 "),s("code",null,"ColorStateList"),n(" 的颜色状态。")],-1),Es={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/is-bright-color",target:"_blank",rel:"noopener noreferrer"},Gs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/to-hex-color",target:"_blank",rel:"noopener noreferrer"},Ns={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/to-alpha-color",target:"_blank",rel:"noopener noreferrer"},Ws={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/mix-color-of",target:"_blank",rel:"noopener noreferrer"},Os={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/to-normal-color-state-list",target:"_blank",rel:"noopener noreferrer"},Ys={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/to-nullable-color-state-list",target:"_blank",rel:"noopener noreferrer"},Hs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/-color-state-list",target:"_blank",rel:"noopener noreferrer"},zs=s("p",null,"适用于颜色的扩展。",-1),Us=o(`<p>颜色在 Android 中是以 <code>Integer</code> (整型) 的形式存在的，虽然存在一个名为 <code>Color</code> 的类对其进行封装，但是很多方法都是在高版本的系统中添加的且 <code>androidx</code> 也没有针对其特定的兼容实现， 在代码上下文中传递的对象通常也是直接使用 <code>Integer</code>。</p><p><code>BetterAndroid</code> 没有理由且无任何必要重新设计一个封装类来管理颜色，于是 <code>BetterAndroid</code> 仅针对 <code>Integer</code> 类型提供了相关扩展。</p><p>所有在方法中传递的颜色对象都会被标注 <code>@ColorInt</code> 注解，请你也遵守 <code>androidx</code> 提供的规范。</p><p>下面是一些对颜色扩展的相关示例用法。</p><p>判断颜色的明亮程度。</p><p>这在你需要根据颜色的明亮程度来决定是否使用深色文字时非常有用。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设我们有以下颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE</span></span>
<span class="line"><span style="color:#768390;">// 要判断其明亮程度，你只需要使用以下方法</span></span>
<span class="line"><span style="color:#768390;">// 你肯定会得到一个 true，因为这是一个白色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isBright </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.isBrightColor</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将颜色转换为 HEX 字符串。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设我们有以下颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE</span></span>
<span class="line"><span style="color:#768390;">// 要将其转换为 HEX 字符串，你只需要使用以下方法</span></span>
<span class="line"><span style="color:#768390;">// 将会得到一个包含透明度的 &quot;#FFFFFFFF&quot;</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> hexString </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.</span><span style="color:#DCBDFB;">toHexColor</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置当前颜色的透明度。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设我们有以下颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE</span></span>
<span class="line"><span style="color:#768390;">// 你可以使用 0f-1f 的浮点数来设置透明度</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> alphaColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.</span><span style="color:#DCBDFB;">toAlphaColor</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0.5f</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以使用 0-255 的整数来设置透明度</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> alphaColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.</span><span style="color:#DCBDFB;">toAlphaColor</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">127</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>混合两个颜色。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设我们有以下颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color1 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color2 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.BLACK</span></span>
<span class="line"><span style="color:#768390;">// 你可以使用以下方法非常简单地将它们进行混合</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> mixColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">mixColorOf</span><span style="color:#ADBAC7;">(color1, color2)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以设置混合的比率，默认为 0.5f</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> mixColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">mixColorOf</span><span style="color:#ADBAC7;">(color1, color2, </span><span style="color:#6CB6FF;">0.2f</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>BetterAndroid</code> 也同样为 <code>ColorStateList</code> 提供了一些扩展功能。</p><p>你可以使用以下方式快速地将现有颜色转换为一个拥有默认颜色的 <code>ColorStateList</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设我们有以下颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE</span></span>
<span class="line"><span style="color:#768390;">// 使用以下方法将其转换为一个拥有默认颜色的 ColorStateList</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> colorStateList </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.</span><span style="color:#DCBDFB;">toNormalColorStateList</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你还可以转换为一个在颜色为透明时返回 null 的 ColorStateList</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> colorStateList </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.</span><span style="color:#DCBDFB;">toNullableColorStateList</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还可以通过 <code>AttrState</code> 手动创建一个 <code>ColorStateList</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> colorStateList </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ColorStateList</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    AttrState.CHECKED to Color.WHITE,</span></span>
<span class="line"><span style="color:#ADBAC7;">    AttrState.PRESSED to Color.BLACK,</span></span>
<span class="line"><span style="color:#ADBAC7;">    AttrState.NORMAL to Color.TRANSPARENT</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="位图-bitmap-扩展" tabindex="-1"><a class="header-anchor" href="#位图-bitmap-扩展" aria-hidden="true">#</a> 位图 (Bitmap) 扩展</h3>`,25),Xs={class:"custom-container tip"},js=s("p",{class:"custom-container-title"},"本节内容",-1),Js={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/decode-to-bitmap",target:"_blank",rel:"noopener noreferrer"},Qs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/decode-to-bitmap-or-null",target:"_blank",rel:"noopener noreferrer"},Zs={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/create-bitmap",target:"_blank",rel:"noopener noreferrer"},$s={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/create-bitmap-or-null",target:"_blank",rel:"noopener noreferrer"},sn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/write-bitmap",target:"_blank",rel:"noopener noreferrer"},nn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/compress-bitmap",target:"_blank",rel:"noopener noreferrer"},en={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/blur",target:"_blank",rel:"noopener noreferrer"},an={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/round",target:"_blank",rel:"noopener noreferrer"},on={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/compress",target:"_blank",rel:"noopener noreferrer"},ln={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/reduce",target:"_blank",rel:"noopener noreferrer"},tn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/zoom",target:"_blank",rel:"noopener noreferrer"},pn=s("p",null,"适用于位图的扩展。",-1),rn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics.base/-bitmap-blur-factory",target:"_blank",rel:"noopener noreferrer"},cn=s("p",null,"适用于位图模糊的扩展。",-1),dn=o(`<p>在 Android 中，位图能够用到各种地方，它是用来显示图片的重要对象。</p><p><code>BetterAndroid</code> 为位图提供了从装载到对其进行转换、缩放、压缩以及模糊等一系列扩展功能。</p><p>在装载位图时，你可以不再需要使用 <code>BitmapFactory</code>，现在有以下方式可以帮助你更加方便地完成这个操作。</p><p>通过文件 <code>File</code> 对象或输入流 <code>InputStream</code> 对象装载位图。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设你的图片位于这个路径</span></span>
<span class="line"><span style="color:#768390;">// 注意这个路径仅用于演示，实际情况下需要访问内置存储中的文件</span></span>
<span class="line"><span style="color:#768390;">// 你需要申请各种各样不同的权限且应当使用 Environment.getExternalStorageDirectory() 方法来获取路径</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> imageFile </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">File</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;/storage/emulated/0/DCIM/Camera/IMG_20210901_000000.jpg&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 通过文件路径创建文件输入流</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> inputStream </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FileInputStream</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;/storage/emulated/0/DCIM/Camera/IMG_20210901_000000.jpg&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 通过文件对象装载位图</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> imageFile.</span><span style="color:#DCBDFB;">decodeToBitmap</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你可以在方法参数中传入 BitmapFactory.Options 对象来对其进行配置</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> imageFile.</span><span style="color:#DCBDFB;">decodeToBitmap</span><span style="color:#ADBAC7;">(BitmapFactory.</span><span style="color:#DCBDFB;">Options</span><span style="color:#ADBAC7;">().</span><span style="color:#DCBDFB;">apply</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// ...</span></span>
<span class="line"><span style="color:#ADBAC7;">})</span></span>
<span class="line"><span style="color:#768390;">// 通过输入流装载位图</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> inputStream.</span><span style="color:#DCBDFB;">decodeToBitmap</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过字节数组 <code>ByteArray</code> 装载位图。</p><p>如果你有一个通过 Base64 加密的图片，你可以将其转换为字节数组并使用以下方式装载位图。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Base64 字符串</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> base64String </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAA...&quot;</span></span>
<span class="line"><span style="color:#768390;">// 将 Base64 字符串转换为字节数组</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> byteArray </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Base64.</span><span style="color:#DCBDFB;">decode</span><span style="color:#ADBAC7;">(base64String, Base64.DEFAULT)</span></span>
<span class="line"><span style="color:#768390;">// 通过字节数组装载位图</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> byteArray.</span><span style="color:#DCBDFB;">decodeToBitmap</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过 <code>Resources</code> 对象装载位图。</p><p>此操作实际上是通过已知的 <code>Drawable</code> 资源 ID 创建一个新的 <code>Bitmap</code> 对象。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Resources</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> resources: </span><span style="color:#F69D50;">Resources</span></span>
<span class="line"><span style="color:#768390;">// 通过资源 ID 装载位图</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> resources.</span><span style="color:#DCBDFB;">createBitmap</span><span style="color:#ADBAC7;">(R.drawable.my_image)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>在不确定位图能否装载成功时，你可以将装载的方法替换为 <code>decodeToBitmapOrNull</code> 及 <code>createBitmapOrNull</code>，这样在装载失败时将会返回 <code>null</code> 而不是抛出异常。</p></div><p>位图装载到内存后或是内存中存在的位图对象，你可以将其重新保存到文件。</p><p>针对 <code>File</code> 对象 Kotlin 的 stdlib 已经给出了一个 <code>File.writeText</code> 的方法，所以 <code>BetterAndroid</code> 仿照其提供了一个 <code>File.writeBitmap</code> 方法。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你要保存到的文件</span></span>
<span class="line"><span style="color:#768390;">// 注意这个路径仅用于演示，实际情况下需要访问内置存储中的文件</span></span>
<span class="line"><span style="color:#768390;">// 你需要申请各种各样不同的权限且应当使用 Environment.getExternalStorageDirectory() 方法来获取路径</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> imageFile </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">File</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;/storage/emulated/0/DCIM/Camera/IMG_20210901_000000_modified.jpg&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 将位图保存到文件</span></span>
<span class="line"><span style="color:#ADBAC7;">imageFile.</span><span style="color:#DCBDFB;">writeBitmap</span><span style="color:#ADBAC7;">(bitmap)</span></span>
<span class="line"><span style="color:#768390;">// 你可以调整 format 和 quality 参数来对其进行配置</span></span>
<span class="line"><span style="color:#768390;">// 默认为 PNG 格式，质量为 100</span></span>
<span class="line"><span style="color:#ADBAC7;">imageFile.</span><span style="color:#DCBDFB;">writeBitmap</span><span style="color:#ADBAC7;">(bitmap, format </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Bitmap.CompressFormat.JPEG, quality </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">80</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你能实际得到一个 <code>OutputStream</code> 对象，你可以使用以下方式将位图写入到输出流中。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的输出流对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> outputStream: </span><span style="color:#F69D50;">OutputStream</span></span>
<span class="line"><span style="color:#768390;">// 使用 use 方法来自动关闭输出流</span></span>
<span class="line"><span style="color:#ADBAC7;">outputStream.</span><span style="color:#DCBDFB;">use</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 将位图写入到输出流中</span></span>
<span class="line"><span style="color:#ADBAC7;">    it.</span><span style="color:#DCBDFB;">compressBitmap</span><span style="color:#ADBAC7;">(bitmap)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 你可以调整 format 和 quality 参数来对其进行配置</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 默认为 PNG 格式，质量为 100</span></span>
<span class="line"><span style="color:#ADBAC7;">    it.</span><span style="color:#DCBDFB;">compressBitmap</span><span style="color:#ADBAC7;">(bitmap, format </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Bitmap.CompressFormat.JPEG, quality </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">80</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面是针对位图的缩放、压缩以及模糊等扩展功能。</p><p>缩放位图。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 将位图缩放为 100x100 的大小</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> zoomBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">zoom</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">100</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">100</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 以倍数缩放，默认为 2 倍</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> zoomBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">reduce</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">3</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>压缩位图。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 将位图压缩为 100 KB 的大小</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> compressBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">compress</span><span style="color:#ADBAC7;">(maxSize </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">100</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你可以调整 format 和 quality 参数来对其进行配置</span></span>
<span class="line"><span style="color:#768390;">// 默认为 PNG 格式，质量为 100</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> compressBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">compress</span><span style="color:#ADBAC7;">(maxSize </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">100</span><span style="color:#ADBAC7;">, format </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Bitmap.CompressFormat.JPEG, quality </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">80</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>圆角化位图。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 将位图设置以 10dp 为半径的圆角</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> roundBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">round</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 你还可以设置每个角的圆角半径</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> roundBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">round</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    topLeft </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">12</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context),</span></span>
<span class="line"><span style="color:#ADBAC7;">    topRight </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">15</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context),</span></span>
<span class="line"><span style="color:#ADBAC7;">    bottomLeft </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context),</span></span>
<span class="line"><span style="color:#ADBAC7;">    bottomRight </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">9</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context)</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>模糊位图，你也可以使用 <code>BitmapBlurFactory</code> 来完成。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 将位图以 25 模糊度进行模糊</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> blurBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">blur</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">25</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,35),un={class:"custom-container warning"},yn=s("p",{class:"custom-container-title"},"注意",-1),An=s("p",null,"这里提供的模糊只是一个通用算法，它能够快速实现模糊效果，但在速度和性能上可能会存在问题，且无法用于动态模糊效果。",-1),vn=s("p",null,[n("在 Android 中的位图模糊效果你可以参考并使用其它可能的第三方库，目前并没有一个通用且完善的解决方案，这是 Android 中的历史遗留问题，"),s("code",null,"BetterAndroid"),n(" 没有理由且无任何必要特意封装针对位图模糊的相关功能。")],-1),bn=s("code",null,"RenderEffect",-1),mn=s("code",null,"RenderScript",-1),Dn={href:"https://github.com/android/renderscript-intrinsics-replacement-toolkit",target:"_blank",rel:"noopener noreferrer"},Bn=s("h3",{id:"可绘制-drawable-扩展",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#可绘制-drawable-扩展","aria-hidden":"true"},"#"),n(" 可绘制 (Drawable) 扩展")],-1),hn={class:"custom-container tip"},Cn=s("p",{class:"custom-container-title"},"本节内容",-1),gn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/-gradient-drawable-compat",target:"_blank",rel:"noopener noreferrer"},Fn=s("p",null,[s("code",null,"GradientDrawable"),n(" 的兼容处理类。")],-1),xn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/set-padding-compat",target:"_blank",rel:"noopener noreferrer"},kn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/set-padding",target:"_blank",rel:"noopener noreferrer"},_n={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/update-padding",target:"_blank",rel:"noopener noreferrer"},wn=s("p",null,[n("适用于 "),s("code",null,"Drawable"),n(" 的扩展。")],-1),fn=o(`<p>在一些情况下，我们可能需要用到直接操作 <code>Drawable</code> 对象的场景，<code>BetterAndroid</code> 为此提供了一些可能用到的扩展功能。</p><p>为支持的 <code>Drawable</code> 设置 <code>padding</code>。</p><p>你可以在任何类型的 <code>Drawable</code> 上使用以下方式设置 <code>padding</code>，但是仅对以下类型的 <code>Drawable</code> 有效：</p><p><code>RippleDrawable</code>、<code>LayerDrawable</code>、<code>ShapeDrawable</code>、<code>GradientDrawable</code></p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Drawable 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> drawable: </span><span style="color:#F69D50;">Drawable</span></span>
<span class="line"><span style="color:#768390;">// 为支持的 Drawable 设置 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">drawable.</span><span style="color:#DCBDFB;">setPadding</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 或者更新指定边的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">drawable.</span><span style="color:#DCBDFB;">updatePadding</span><span style="color:#ADBAC7;">(horizontal </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为 <code>GradientDrawable</code> 设置 <code>padding</code> 并进行兼容处理。</p><p>支持在代码层面设置 <code>padding</code> 的 <code>GradientDrawable</code> 仅在 Android 10 及以上版本中可用。</p><p>你可以使用以下兼容方式为 <code>GradientDrawable</code> 设置 <code>padding</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 GradientDrawable 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> drawable: </span><span style="color:#F69D50;">GradientDrawable</span></span>
<span class="line"><span style="color:#768390;">// 设置 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">drawable.</span><span style="color:#DCBDFB;">setPaddingCompat</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context), </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context), </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context), </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 或者使用上述提到的设置方法一次性设置所有边的 padding</span></span>
<span class="line"><span style="color:#768390;">// 这个方法会自动为你对接到 setPaddingCompat</span></span>
<span class="line"><span style="color:#ADBAC7;">drawable.</span><span style="color:#DCBDFB;">setPadding</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但是请注意，在 Android 10 及以下版本中，你需要使用 <code>GradientDrawableCompat</code> 来创建 <code>GradientDrawable</code> 才能使 <code>padding</code> 生效。</p><p>你还可以继承 <code>GradientDrawableCompat</code> 来实现自己的 <code>GradientDrawable</code>。</p><h3 id="toast-扩展" tabindex="-1"><a class="header-anchor" href="#toast-扩展" aria-hidden="true">#</a> Toast 扩展</h3>`,14),Vn={class:"custom-container tip"},Tn=s("p",{class:"custom-container-title"},"本节内容",-1),qn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/toast",target:"_blank",rel:"noopener noreferrer"},In=s("p",null,[n("适用于 "),s("code",null,"Toast"),n(" 的扩展。")],-1),Kn=s("p",null,[n("Android 中的 "),s("code",null,"Toast"),n(" 使用场景非常广泛，但是其存在各种各样的使用问题。")],-1),Rn=s("code",null,"androidx",-1),Pn=s("code",null,"ktx",-1),Sn=s("code",null,"Toast",-1),Ln=s("code",null,"Context.toast",-1),Mn={href:"https://github.com/android/android-ktx/issues/143",target:"_blank",rel:"noopener noreferrer"},En=o(`<p>在 Kotlin 中简化一个 <code>Toast</code> 的使用方式应该是非常有必要的，因为有时候显示信息最快的方式还是弹出一个 <code>Toast</code>。</p><p>所以 <code>BetterAndroid</code> 重新为此提供了一个 <code>toast</code> 的扩展方法，你可以在以下实例或是被其继承的实例中使用它：</p><p><code>Context</code>、<code>Window</code>、<code>Fragment</code>、<code>View</code>、<code>Dialog</code></p><p>你可以非常简单地使用以下方式弹出一个 <code>Toast</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 弹出一个 Toast</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">toast</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你可以在方法参数中传入 Toast.LENGTH_SHORT 或 Toast.LENGTH_LONG 来设置显示时长</span></span>
<span class="line"><span style="color:#768390;">// 默认为 Toast.LENGTH_SHORT</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">toast</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span><span style="color:#ADBAC7;">, Toast.LENGTH_SHORT)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),Gn=s("code",null,"BetterAndroid",-1),Nn={href:"https://developer.android.com/about/versions/11/behavior-changes-11#custom-toasts-bg-blocked",target:"_blank",rel:"noopener noreferrer"},Wn=o(`<p><code>Toast</code> 仅能在主线程中使用，如果要在任何线程中弹出一个 <code>Toast</code>，你只需要像下面这样简单地对其进行配置。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 创建一个新的线程</span></span>
<span class="line"><span style="color:#DCBDFB;">Thread</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 延迟 1 秒</span></span>
<span class="line"><span style="color:#ADBAC7;">    Thread.</span><span style="color:#DCBDFB;">sleep</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">1000</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 弹出一个 Toast 并设置 allowBackground 为 true</span></span>
<span class="line"><span style="color:#ADBAC7;">    context.</span><span style="color:#DCBDFB;">toast</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span><span style="color:#ADBAC7;">, allowBackground </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}.</span><span style="color:#DCBDFB;">start</span><span style="color:#ADBAC7;">() </span><span style="color:#768390;">// 启动它</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样，你就能在任何线程的情况下弹出一个 <code>Toast</code>，需要注意的是，这个参数在默认情况下是 <code>false</code>，你需要手动设置它。</p><p>你应该尽量避免在非主线程中弹出 <code>Toast</code>，因为这样可能会导致一些可能的 “黑盒问题” 以及未知的隐患。</p>`,5),On={class:"custom-container warning"},Yn=o('<p class="custom-container-title">注意</p><p>正如上面所说，在 Android 13 及以上系统中，你需要为 <code>Toast</code> 与通知一样定义并添加运行时权限。</p><p>类似 MIUI 等一些第三方 ROM 可能会允许在没有权限的情况下在应用程序内部弹出 <code>Toast</code>。</p><p>如果没有悬浮窗需求，一个好的建议是使用一些其它类似行为的方式来替代 <code>Toast</code>，例如使用 Material 组件提供的 <code>Snackbar</code>。</p>',4),Hn={href:"https://developer.android.com/develop/ui/views/notifications/notification-permission",target:"_blank",rel:"noopener noreferrer"},zn=s("h3",{id:"window-扩展",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#window-扩展","aria-hidden":"true"},"#"),n(" Window 扩展")],-1),Un={class:"custom-container tip"},Xn=s("p",{class:"custom-container-title"},"本节内容",-1),jn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-layout-params",target:"_blank",rel:"noopener noreferrer"},Jn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-screen-brightness",target:"_blank",rel:"noopener noreferrer"},Qn={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/clear-screen-brightness",target:"_blank",rel:"noopener noreferrer"},Zn=s("p",null,[n("适用于 "),s("code",null,"Window"),n(" 的扩展。")],-1),$n=o(`<p><code>BetterAndroid</code> 为 <code>Window</code> 提供了一些可能用到的扩展功能。</p><p>你可以像使用 <code>androidx</code> 中的 <code>View.updateLayoutParams</code> 一样使用以下方式修改 <code>Window.attributes</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Window 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> window: </span><span style="color:#F69D50;">Window</span></span>
<span class="line"><span style="color:#768390;">// 修改 Window.attributes 中的参数</span></span>
<span class="line"><span style="color:#ADBAC7;">window.</span><span style="color:#DCBDFB;">updateLayoutParams</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    gravity </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Gravity.CENTER</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// ...</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>BetterAndroid</code> 还封装了为 <code>Window</code> 单独设置屏幕亮度的方法。</p><p>你可以使用以下方式更方便地修改 <code>Window.attributes.screenBrightness</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Window 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> window: </span><span style="color:#F69D50;">Window</span></span>
<span class="line"><span style="color:#768390;">// 为当前 Window 设置屏幕亮度 (0-100)</span></span>
<span class="line"><span style="color:#ADBAC7;">window.</span><span style="color:#DCBDFB;">updateScreenBrightness</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">50</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你也可以使用 Float 类型的参数来设置屏幕亮度</span></span>
<span class="line"><span style="color:#ADBAC7;">window.</span><span style="color:#DCBDFB;">updateScreenBrightness</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0.5f</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你需要还原系统提供的默认屏幕亮度，你可以使用以下方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Window 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> window: </span><span style="color:#F69D50;">Window</span></span>
<span class="line"><span style="color:#768390;">// 清除已设置的屏幕亮度</span></span>
<span class="line"><span style="color:#ADBAC7;">window.</span><span style="color:#DCBDFB;">clearScreenBrightness</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="view-扩展" tabindex="-1"><a class="header-anchor" href="#view-扩展" aria-hidden="true">#</a> View 扩展</h3>`,12),se={class:"custom-container tip"},ne=s("p",{class:"custom-container-title"},"本节内容",-1),ee={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/location",target:"_blank",rel:"noopener noreferrer"},ae={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/parent",target:"_blank",rel:"noopener noreferrer"},oe={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/parent-or-null",target:"_blank",rel:"noopener noreferrer"},le={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/child",target:"_blank",rel:"noopener noreferrer"},te={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/child-or-null",target:"_blank",rel:"noopener noreferrer"},ie={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/first-child",target:"_blank",rel:"noopener noreferrer"},pe={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/last-child",target:"_blank",rel:"noopener noreferrer"},re={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/first-child-or-null",target:"_blank",rel:"noopener noreferrer"},ce={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/last-child-or-null",target:"_blank",rel:"noopener noreferrer"},de={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/remove-self",target:"_blank",rel:"noopener noreferrer"},ue={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/remove-self-in-layout",target:"_blank",rel:"noopener noreferrer"},ye={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/show-ime",target:"_blank",rel:"noopener noreferrer"},Ae={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/hide-ime",target:"_blank",rel:"noopener noreferrer"},ve={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/perform-key-pressed",target:"_blank",rel:"noopener noreferrer"},be={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/perform-touch",target:"_blank",rel:"noopener noreferrer"},me={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-padding",target:"_blank",rel:"noopener noreferrer"},De={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-margin",target:"_blank",rel:"noopener noreferrer"},Be={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/walk-to-root",target:"_blank",rel:"noopener noreferrer"},he={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/walk-through-children",target:"_blank",rel:"noopener noreferrer"},Ce={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/index-of-in-parent",target:"_blank",rel:"noopener noreferrer"},ge={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/outline-provider",target:"_blank",rel:"noopener noreferrer"},Fe={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/-view-layout-params.html",target:"_blank",rel:"noopener noreferrer"},xe={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/-layout-params-match-parent",target:"_blank",rel:"noopener noreferrer"},ke={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/-layout-params-wrap-content",target:"_blank",rel:"noopener noreferrer"},_e=s("p",null,[n("适用于 "),s("code",null,"View"),n(" 的扩展。")],-1),we=o(`<p><code>View</code> 是用户界面中的重要组成部分，在使用 Kotlin 时，<code>androidx</code> 为我们提供了关于 <code>View</code> 的扩展功能，但是依然不够完善。</p><p><code>BetterAndroid</code> 在 <code>androidx</code> 的相关扩展功能基础上进行了完善和丰富，下面是你能够用到的一些扩展功能。</p><p>获取 <code>View</code> 在屏幕中的坐标。</p><p>你可以通过以下方式获取到一个 <code>Point</code> 对象，它包含了 <code>View</code> 在屏幕中的坐标。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 获取 View 在屏幕中的坐标</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> location </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.location</span></span>
<span class="line"><span style="color:#768390;">// X 坐标</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> x </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> location.x</span></span>
<span class="line"><span style="color:#768390;">// Y 坐标</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> y </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> location.y</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取当前 <code>View</code> 的父布局。</p><p>在传统写法中，我们需要使用 <code>View.parent</code> 获取到 <code>ViewParent</code> 对象，然后使用 <code>as</code> 转换为 <code>ViewGroup</code> 以获取到父布局对象。</p><p>这种写法看起来非常麻烦，于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 获取当前 View 的父布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parent: </span><span style="color:#F69D50;">ViewGroup</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">parent</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 指定父布局的类型 (如果类型是已知且确定的)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">parent</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 在不确定父布局是否存在的情况下，你还可以使用以下方式</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">parentOrNull</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取当前 <code>ViewGroup</code> 的子布局。</p><p>在传统写法中，我们需要使用 <code>ViewGroup.getChildAt</code> 获取到 <code>View</code> 对象，然后使用 <code>as</code> 转换为 <code>View</code> 以获取到子布局对象。</p><p>这种写法看起来同样非常麻烦，于是 <code>BetterAndroid</code> 也此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 ViewGroup 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> viewGroup: </span><span style="color:#F69D50;">ViewGroup</span></span>
<span class="line"><span style="color:#768390;">// 获取当前 ViewGroup 的子布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> child: </span><span style="color:#F69D50;">View</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">child</span><span style="color:#ADBAC7;">(index </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 指定子布局的类型 (如果类型是已知且确定的)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> child </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">child</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">Button</span><span style="color:#ADBAC7;">&gt;(index </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 获取当前 ViewGroup 的第一个子布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> firstChild: </span><span style="color:#F69D50;">View</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">firstChild</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 获取当前 ViewGroup 的最后一个子布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> lastChild: </span><span style="color:#F69D50;">View</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">lastChild</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 在不确定子布局是否存在的情况下，你还可以使用以下方式</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> child </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">childOrNull</span><span style="color:#ADBAC7;">(index </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> firstChild </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">firstChildOrNull</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> lastChild </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">lastChildOrNull</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从父布局 (容器) 中移除自身。</p><p>通常情况下，我们从父布局中移除 <code>View</code> 自身需要使用 <code>View.getParent</code> 获取到父布局对象，然后转换为 <code>ViewGroup</code>，最后调用 <code>ViewGroup.removeView</code> 方法。</p><p>现在，你可以使用以下方式更加简单地从父布局中移除其自身，如果不存在父布局或是父布局不是 <code>ViewGroup</code> (这种情况一般是不存在的)，此方法将无任何作用且不需要担心会产生任何负面效果。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 从父布局中移除自身</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">removeSelf</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 使用 ViewGroup.removeViewInLayout 方法移除自身</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">removeSelfInLayout</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>显示或隐藏输入法 (IME)。</p><p>通常情况下控制输入法的显示和隐藏可以通过输入框的焦点来自动完成，但是一些情况下我们希望能够手动控制输入法的显示和隐藏。</p><p>如果当前 <code>View</code> 在 <code>Activity</code> 中，你可以使用以下方式显示或隐藏输入法。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 显示输入法</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">showIme</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 隐藏输入法</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">hideIme</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 Android 11 及以上版本中，以上方法会使用 <code>WindowInsetsController</code> 来控制输入法的显示和隐藏， 在 <code>View</code> 不处于 <code>Activity</code> 中或当前 Android 版本低于 Android 11 时，将会使用 <code>InputMethodManager</code> 来控制输入法的显示和隐藏。</p>`,27),fe={class:"custom-container tip"},Ve=s("p",{class:"custom-container-title"},"小提示",-1),Te=s("code",null,"BetterAndroid",-1),qe={href:"https://developer.android.com/reference/android/view/WindowInsetsAnimationController",target:"_blank",rel:"noopener noreferrer"},Ie=o(`<div class="custom-container warning"><p class="custom-container-title">注意</p><p>在 Android 11 及以上版本中，建议将 <code>Activity</code> 的 <code>android:windowSoftInputMode</code> 参数设置为 <code>adjustResize</code> 以便于更好地控制输入法的显示和隐藏。</p><p>如果你的 <code>View</code> 不处于 <code>Activity</code> 中或当前 Android 版本低于 11，以上方案可能在一定条件下会无效。</p><p>在 <code>Activity</code> 首次启动时，建议为显示或隐藏输入法事件进行延迟处理，否则可能会无效，且显示和隐藏事件的间隔不应过短。</p></div><p>模拟触摸事件 (Touch)。</p><p><code>View</code> 提供的 <code>performClick</code> 方法仅能模拟点击事件，如果你需要模拟触摸事件，你可以使用 <code>BetterAndroid</code> 提供的 <code>View.performTouch</code> 方法。</p><p>这个方法所接受的参数如下表所示。</p><table><thead><tr><th>参数名称</th><th>参数类型</th><th>参数说明</th></tr></thead><tbody><tr><td><code>downX</code></td><td><code>Float</code></td><td>模拟触摸事件的按下 X 坐标</td></tr><tr><td><code>downY</code></td><td><code>Float</code></td><td>模拟触摸事件的按下 Y 坐标</td></tr><tr><td><code>upX</code></td><td><code>Float</code></td><td>模拟触摸事件的抬起 X 坐标</td></tr><tr><td><code>upY</code></td><td><code>Float</code></td><td>模拟触摸事件的抬起 Y 坐标</td></tr><tr><td><code>duration</code></td><td><code>Long</code></td><td>模拟触摸事件的持续时间 (从按下到抬起)，单位为毫秒</td></tr></tbody></table><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 模拟从 (15, 30) 到 (105, 130) 的触摸事件，持续 500 毫秒</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">performTouch</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">15f</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">30f</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">105f</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">130f</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">500</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>模拟按键事件。</p><p>你可以模拟物理键盘或输入法 (IME) 发送给当前 <code>View</code> 的按键事件，例如在 <code>EditText</code> 中，你可以模拟按下退格键来删除文本。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">EditText</span></span>
<span class="line"><span style="color:#768390;">// 模拟按下退格键</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">performKeyPressed</span><span style="color:#ADBAC7;">(KeyEvent.KEYCODE_DEL)</span></span>
<span class="line"><span style="color:#768390;">// 你可以在后方加入 duration 参数来设置持续时间 (从按下到抬起)，单位为毫秒</span></span>
<span class="line"><span style="color:#768390;">// 默认为 150 毫秒</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">performKeyPressed</span><span style="color:#ADBAC7;">(KeyEvent.KEYCODE_DEL, duration </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">500</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新 <code>View</code> 的 <code>padding</code> 和 <code>margin</code>。</p><p><code>androidx</code> 提供了一个 <code>View.updatePadding</code> 方法，<code>BetterAndroid</code> 在此基础上提供了可更新横向和纵向方向的方法，如果你只需要更新这两个方向的 <code>padding</code>，你可以无需写两遍重复数值。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 更新横向方向的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updatePadding</span><span style="color:#ADBAC7;">(horizontal </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 更新纵向方向的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updatePadding</span><span style="color:#ADBAC7;">(vertical </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>BetterAndroid</code> 同样提供了一个 <code>View.updateMargin</code> 方法，它的使用方式与 <code>View.updatePadding</code> 相同。</p><p>这个方法仅会在 <code>View</code> 的 <code>LayoutParams</code> 为 <code>MarginLayoutParams</code> 时生效，其它情况下均不会有任何作用。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 更新横向方向的 margin</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updateMargin</span><span style="color:#ADBAC7;">(horizontal </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 更新纵向方向的 margin</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updateMargin</span><span style="color:#ADBAC7;">(vertical </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 更新左侧的 margin</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updateMargin</span><span style="color:#ADBAC7;">(left </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>遍历父布局以及所有子布局。</p><p>通常情况下，我们需要使用 <code>View.parent</code> 方法递归遍历父布局，使用 <code>ViewGroup.children</code> 方法递归遍历子布局。</p><p><code>BetterAndroid</code> 为此提供了一个更加简单的方式，它的设计灵感来源于 Kotlin 提供的 <code>File</code> 中的 <code>walk</code> 扩展方法。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 ViewGroup 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> viewGroup: </span><span style="color:#F69D50;">ViewGroup</span></span>
<span class="line"><span style="color:#768390;">// 获取所有父布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parents </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">walkToRoot</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 获取所有子布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> children </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">walkThroughChildren</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取 <code>View</code> 在父布局中的索引。</p><p>在传统写法中，我们需要使用 <code>ViewGroup.indexOfChild</code> 获取到 <code>View</code> 在父布局中的索引。</p><p>这种写法看起来不是很友好，于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 获取 View 在父布局中的索引</span></span>
<span class="line"><span style="color:#768390;">// 如果不存在父布局将会返回 -1</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> index </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">indexOfInParent</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置 <code>View</code> 的 <code>outlineProvider</code> (外轮廓提供者)。</p><p><code>View</code> 的 <code>outlineProvider</code> 用于设置 <code>View</code> 的外轮廓，它的类型为 <code>ViewOutlineProvider</code>。</p><p>在 Kotlin 中，我们需要使用 <code>view.outlineProvider = object : ViewOutlineProvider()</code> 的方式进行设置，这看起来并不友好。</p><p>于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 设置 View 的 outlineProvider</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">outlineProvider</span><span style="color:#ADBAC7;"> { view, outline </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 例如，你可以在此处设置圆形的外轮廓</span></span>
<span class="line"><span style="color:#ADBAC7;">    outline.</span><span style="color:#DCBDFB;">setOval</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, view.width, view.height)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 或者你可以在此处设置圆角矩形的外轮廓</span></span>
<span class="line"><span style="color:#ADBAC7;">    outline.</span><span style="color:#DCBDFB;">setRoundRect</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, view.width, view.height, </span><span style="color:#6CB6FF;">10f</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 记得在设置 outlineProvider 之后设置 clipToOutline 为 true</span></span>
<span class="line"><span style="color:#ADBAC7;">view.clipToOutline </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>手动创建一个 <code>LayoutParams</code> 对象。</p><p><code>LayoutParams</code> 是 <code>View</code> 的布局参数，它的类型取决于 <code>View</code> 的父布局，例如 <code>LinearLayout</code> 的 <code>LayoutParams</code> 为 <code>LinearLayout.LayoutParams</code>。</p><p>有时候，你可能需要有手动创建这个对象并设置到 <code>View</code> 中的需求，此时 <code>BetterAndroid</code> 提供了 <code>ViewLayoutParams</code> 方法， 现在，你可以省去使用超级长的 <code>ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT)</code> 创建对象的步骤。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 LinearLayout.LayoutParams 对象，默认情况下 width 和 height 均为 WRAP_CONTENT</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> layoutParams </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ViewLayoutParams</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">.</span><span style="color:#F69D50;">LayoutParams</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 同时设置 width 和 height 为 MATCH_PARENT</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> layoutParams </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ViewLayoutParams</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">.</span><span style="color:#F69D50;">LayoutParams</span><span style="color:#ADBAC7;">&gt;(marchParent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 仅设置 width 为 MATCH_PARENT</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> layoutParams </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ViewLayoutParams</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">.</span><span style="color:#F69D50;">LayoutParams</span><span style="color:#ADBAC7;">&gt;(widthMatchParent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 手动设置 width 和 height</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> layoutParams </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ViewLayoutParams</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">.</span><span style="color:#F69D50;">LayoutParams</span><span style="color:#ADBAC7;">&gt;(</span><span style="color:#6CB6FF;">50</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context), </span><span style="color:#6CB6FF;">30</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 设置到 View 中</span></span>
<span class="line"><span style="color:#ADBAC7;">view.layoutParams </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> layoutParams</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="layoutinflater-扩展" tabindex="-1"><a class="header-anchor" href="#layoutinflater-扩展" aria-hidden="true">#</a> LayoutInflater 扩展</h3>`,41),Ke={class:"custom-container tip"},Re=s("p",{class:"custom-container-title"},"本节内容",-1),Pe={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/layout-inflater",target:"_blank",rel:"noopener noreferrer"},Se={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/inflate",target:"_blank",rel:"noopener noreferrer"},Le=s("p",null,[n("适用于 "),s("code",null,"LayoutInflater"),n(" 的扩展。")],-1),Me=o(`<p>通常情况下我们可以在 <code>Activity</code> 中使用 <code>getLayoutInflater</code> 或使用 <code>LayoutInflater.from(context)</code> 来创建一个 <code>LayoutInflater</code> 对象，然后使用 <code>inflate</code> 方法来装载布局。</p><p><code>BetterAndroid</code> 为你简化了这一步骤，现在，你能够在 <code>Context</code> 中使用 <code>layoutInflater</code> 获取到 <code>LayoutInflater</code> 对象，然后使用 <code>inflate</code> 方法来装载布局。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 ViewGroup 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">ViewGroup</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Context 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 你可以在 ViewGroup 中使用以下方式装载布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myView </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.layoutInflater.</span><span style="color:#DCBDFB;">inflate</span><span style="color:#ADBAC7;">(R.layout.my_layout, root </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view)</span></span>
<span class="line"><span style="color:#768390;">// 你可以设置 attachToRoot 参数来决定是否同时将其添加到 ViewGroup 中</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myView </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.layoutInflater.</span><span style="color:#DCBDFB;">inflate</span><span style="color:#ADBAC7;">(R.layout.my_layout, root </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view, attachToRoot </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="textview-扩展" tabindex="-1"><a class="header-anchor" href="#textview-扩展" aria-hidden="true">#</a> TextView 扩展</h3>`,5),Ee={class:"custom-container tip"},Ge=s("p",{class:"custom-container-title"},"本节内容",-1),Ne={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/is-ellipsize",target:"_blank",rel:"noopener noreferrer"},We={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/is-underline",target:"_blank",rel:"noopener noreferrer"},Oe={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/is-strike-through",target:"_blank",rel:"noopener noreferrer"},Ye={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/text-color",target:"_blank",rel:"noopener noreferrer"},He={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-text",target:"_blank",rel:"noopener noreferrer"},ze={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/clear",target:"_blank",rel:"noopener noreferrer"},Ue={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-typeface",target:"_blank",rel:"noopener noreferrer"},Xe={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-compound-drawables",target:"_blank",rel:"noopener noreferrer"},je={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-compound-drawables-with-intrinsic-bounds",target:"_blank",rel:"noopener noreferrer"},Je={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/set-digits",target:"_blank",rel:"noopener noreferrer"},Qe=s("p",null,[n("适用于 "),s("code",null,"TextView"),n(" 的扩展。")],-1),Ze=o(`<p><code>TextView</code> 是 Android 中最常用的组件之一，<code>BetterAndroid</code> 为 <code>TextView</code> 提供了一些能在 Kotlin 中使用更加方便的扩展功能。</p><p>判断 <code>TextView</code> 是否存在省略号。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 判断 TextView 是否存在省略号</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isEllipsize </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> textView.isEllipsize</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取、设置 <code>TextView</code> 的下划线效果。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 获取 TextView 是否存在下划线效果</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isUnderline </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> textView.isUnderline</span></span>
<span class="line"><span style="color:#768390;">// 设置 TextView 的下划线效果</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.isUnderline </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取、设置 <code>TextView</code> 的删除线效果。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 获取 TextView 是否存在删除线效果</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isStrikeThrough </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> textView.isStrikeThrough</span></span>
<span class="line"><span style="color:#768390;">// 设置 TextView 的删除线效果</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.isStrikeThrough </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在设置下划线或删除线效果时，你可能需要手动对 <code>TextView</code> 使用 <code>paint.isAntiAlias = true</code> 启用抗锯齿以达到更好的效果，这是 Android 中对于绘制性能的一个历史遗留问题。</p></div><p>获取、设置 <code>TextView</code> 的文本颜色。</p><p>虽然说，你能够使用 <code>TextView.setTextColor</code> 方法来设置文本颜色，但是它不能很好地被识别为 Kotlin 中的 Getter、Setter 方法，因为对应的 <code>TextView.getTextColors</code> 是一个 <code>ColorStateList</code> 对象。</p><p>所以 <code>BetterAndroid</code> 添加了针对这个功能的扩展，现在，你可以使用以下方式获取、设置 <code>TextView</code> 的文本颜色。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 获取 TextView 的文本颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> textView.textColor</span></span>
<span class="line"><span style="color:#768390;">// 设置 TextView 的文本颜色</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.textColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.RED</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新 <code>EditText</code> 的文本。</p><p><code>EditText</code> 继承自 <code>TextView</code>，直接使用 <code>setText(...)</code> 更新的文本会导致光标位置依然处于第一位。</p><p><code>BetterAndroid</code> 为此提供了一个更加方便的方式，它会根据文本长度自动帮你设置 <code>setSelection</code> 以保持光标位置始终在文本的最后。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 EditText 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> editText: </span><span style="color:#F69D50;">EditText</span></span>
<span class="line"><span style="color:#768390;">// 更新 EditText 的文本</span></span>
<span class="line"><span style="color:#ADBAC7;">editText.</span><span style="color:#DCBDFB;">updateText</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>清空 <code>TextView</code> 的文本。</p><p>使用 <code>setText(&quot;&quot;)</code> 或 <code>text = &quot;&quot;</code> 看起来不是很友好，于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 清空 TextView 的文本</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.</span><span style="color:#DCBDFB;">clear</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新 <code>TextView</code> 的 <code>Typeface</code> (字体)。</p><p><code>Typeface</code> 是 Android 中的字体，有时候我们只需要关心字体的粗细和斜体，而不需要设置具体的字体。</p><p><code>BetterAndroid</code> 为此提供了一个更加简单的方式，现在，你可以使用以下方式更新 <code>TextView</code> 的 <code>Typeface</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 仅将 TextView 的字体设置为粗体</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.</span><span style="color:#DCBDFB;">updateTypeface</span><span style="color:#ADBAC7;">(Typeface.BOLD)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新 <code>TextView</code> 的 <code>CompoundDrawables</code> (复合绘图)。</p><p><code>CompoundDrawables</code> 是 <code>TextView</code> 中的复合绘图，它包含了 <code>Drawable</code> 对象。</p><p>使用传统的 <code>setCompoundDrawables</code> 方法需要传入四个参数且不需要的参数还需要填写 <code>null</code>，这看起来非常麻烦。</p><p><code>BetterAndroid</code> 为此提供了一个更加简单的方式，现在，你可以使用以下方式直接更新 <code>TextView</code> 的 <code>CompoundDrawables</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 更新 TextView 的 CompoundDrawables</span></span>
<span class="line"><span style="color:#768390;">// 我们只需要填写需要方向的参数，其它方向的参数将会自动重新设置为原有的 CompoundDrawables</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.</span><span style="color:#DCBDFB;">updateCompoundDrawables</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    left </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_left,</span></span>
<span class="line"><span style="color:#ADBAC7;">    top </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_top,</span></span>
<span class="line"><span style="color:#ADBAC7;">    right </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_right,</span></span>
<span class="line"><span style="color:#ADBAC7;">    bottom </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_bottom</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 使用 setCompoundDrawablesWithIntrinsicBounds 的方式更新 CompoundDrawables</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.</span><span style="color:#DCBDFB;">updateCompoundDrawablesWithIntrinsicBounds</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    left </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_left,</span></span>
<span class="line"><span style="color:#ADBAC7;">    top </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_top,</span></span>
<span class="line"><span style="color:#ADBAC7;">    right </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_right,</span></span>
<span class="line"><span style="color:#ADBAC7;">    bottom </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_bottom</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置 <code>TextView</code> 的输入限制 (Digits)。</p><p>这个属性仅能在 XML 中方便地使用 <code>digits</code> 来设置，但是如果你需要动态修改它，就需要 <code>TextView.setKeyListener</code> 方法。</p><p>为此，<code>BetterAndroid</code> 为 <code>TextView</code> 提供了一个 <code>setDigits</code> 方法，你可以使用以下方式设置 <code>TextView</code> 的输入限制。</p><p>由于输入功能是由 <code>EditText</code> 完成的，而 <code>EditText</code> 继承自 <code>TextView</code>，所以一般情况下此方法仅在 <code>EditText</code> 中使用。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 EditText 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> editText: </span><span style="color:#F69D50;">EditText</span></span>
<span class="line"><span style="color:#768390;">// 设置输入框仅能输入数字</span></span>
<span class="line"><span style="color:#ADBAC7;">editText.</span><span style="color:#DCBDFB;">setDigits</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;0123456789&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 设置输入框仅能输入小写字母</span></span>
<span class="line"><span style="color:#ADBAC7;">editText.</span><span style="color:#DCBDFB;">setDigits</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 第二位参数为 inputType，你可以在此处限制输入框的显示行为</span></span>
<span class="line"><span style="color:#768390;">// 例如仅能输入数字且显示为密码</span></span>
<span class="line"><span style="color:#ADBAC7;">editText.</span><span style="color:#DCBDFB;">setDigits</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;0123456789&quot;</span><span style="color:#ADBAC7;">, InputType.TYPE_CLASS_NUMBER or InputType.TYPE_NUMBER_VARIATION_PASSWORD)</span></span>
<span class="line"><span style="color:#768390;">// 第三位参数为 locale，你可以在此处设置输入框的国家区域 (仅在 Android 8 及以上版本中可用)</span></span>
<span class="line"><span style="color:#768390;">// 例如设置为中国大陆地区</span></span>
<span class="line"><span style="color:#ADBAC7;">editText.</span><span style="color:#DCBDFB;">setDigits</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;0123456789&quot;</span><span style="color:#ADBAC7;">, locale </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Locale.CHINA)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="布局绑定-viewbinding-扩展" tabindex="-1"><a class="header-anchor" href="#布局绑定-viewbinding-扩展" aria-hidden="true">#</a> 布局绑定 (ViewBinding) 扩展</h3>`,43),$e={class:"custom-container tip"},sa=s("p",{class:"custom-container-title"},"本节内容",-1),na={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.binding/-view-binding",target:"_blank",rel:"noopener noreferrer"},ea={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.binding/view-binding",target:"_blank",rel:"noopener noreferrer"},aa={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.binding/-view-binding-builder",target:"_blank",rel:"noopener noreferrer"},oa={href:"https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.binding/-view-binding-delegate",target:"_blank",rel:"noopener noreferrer"},la=s("p",null,[n("适用于 "),s("code",null,"ViewBinding"),n(" 的扩展。")],-1),ta=o("<p><code>ViewBinding</code> 是 Android 中的一个新特性，它能够帮助我们更加方便地操作布局中的组件。</p><p>但是显然官方没有开放对它的使用方法，能够获取到生成类的接口 <code>ViewBinding</code> 也不存在 <code>inflate</code> 等方法的实现，你仅能使用类似 <code>ActivityMainBinding.inflate(layoutInflater)</code> 的方式来装载布局。</p><p>于是 <code>BetterAndroid</code> 对其进行了反射处理来获得其中的 <code>inflate</code> 方法并通过泛型来提取对象的类型。</p>",3),ia={href:"https://github.com/DylanCaiCoding/ViewBindingKTX",target:"_blank",rel:"noopener noreferrer"},pa=o(`<p>现在你可以使用以下方式创建一个 <code>ViewBindingBuilder</code> 并可以将其传递到任何需要的地方进行操作。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 创建一个 ViewBindingBuilder</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> builder </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ViewBinding</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">ActivityMainBinding</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 在需要时装载布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> binding </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> builder.</span><span style="color:#DCBDFB;">inflate</span><span style="color:#ADBAC7;">(layoutInflater)</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 你也可以绑定到一个存在的 View 上</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> binding </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> builder.</span><span style="color:#DCBDFB;">bind</span><span style="color:#ADBAC7;">(view)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样我们就实现了 <code>ViewBinding</code> 的传递，你可以在任何地方使用它。</p><p>你还可以使用委托的方式来实现在 <code>Activity</code> 等地方使用 <code>ViewBinding</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourActvity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">Activity</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> binding: </span><span style="color:#F69D50;">ActivityMainBinding</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">by</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">viewBinding</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#DCBDFB;">setContentView</span><span style="color:#ADBAC7;">(binding.root)</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你需要实现将 <code>ViewBinding</code> 封装到父类并使用泛型的方式绑定到子类，你可以使用以下方式。</p><p>首先我们需要创建一个父类。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">open</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourBaseActvity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">VB</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">ViewBinding</span><span style="color:#ADBAC7;">&gt; : </span><span style="color:#F69D50;">Activity</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">lateinit</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> binding: </span><span style="color:#F69D50;">VB</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 在这里装载 ViewBinding</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> ViewBindingBuilder.</span><span style="color:#DCBDFB;">fromGeneric</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">VB</span><span style="color:#ADBAC7;">&gt;(</span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">).</span><span style="color:#DCBDFB;">inflate</span><span style="color:#ADBAC7;">(layoutInflater)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#DCBDFB;">setContentView</span><span style="color:#ADBAC7;">(binding.root)</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后将这个父类作为全局对象继承到子类中。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourActivity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">YourBaseActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">ActivityMainBinding</span><span style="color:#ADBAC7;">&gt;() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.mainText.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14),ra={class:"custom-container tip"},ca=s("p",{class:"custom-container-title"},"小提示",-1),da=s("code",null,"AppBindingActivity",-1),ua=s("code",null,"AppBindingFragment",-1),ya=s("div",{class:"custom-container danger"},[s("p",{class:"custom-container-title"},"特别注意"),s("p",null,[n("如果你的应用程序在编译时启用了混淆功能，你需要参考 "),s("a",{href:"../config/r8-proguard"},"R8 与 ProGuard 混淆"),n(" 来正确配置混淆规则。")])],-1);function Aa(va,ba){const a=t("ExternalLinkIcon"),l=t("RouterLink");return r(),c("div",null,[u,s("p",null,[n("你可以 "),s("a",y,[n("点击这里"),e(a)]),n(" 查看 KDoc。")]),A,s("div",v,[b,s("p",null,[s("a",m,[n("Activity → startActivity"),e(a)])]),s("p",null,[s("a",D,[n("Activity → startActivityOrElse"),e(a)])]),s("p",null,[s("a",B,[n("Activity → isInMultiWindowModeCompat"),e(a)])]),h]),C,s("div",g,[F,x,s("p",null,[n("请参考 "),s("a",k,[n("Package visibility filtering on Android"),e(a)]),n("。")])]),_,s("div",w,[f,s("p",null,[s("a",V,[n("Fragment → fragmentManager"),e(a)])]),s("p",null,[s("a",T,[n("Fragment → findFragment"),e(a)])]),s("p",null,[s("a",q,[n("Fragment → attachToActivity"),e(a)])]),s("p",null,[s("a",I,[n("Fragment → attachToFragment"),e(a)])]),s("p",null,[s("a",K,[n("Fragment → detachFromActivity"),e(a)])]),s("p",null,[s("a",R,[n("Fragment → detachFromFragment"),e(a)])]),s("p",null,[s("a",P,[n("Fragment → replaceFromActivity"),e(a)])]),s("p",null,[s("a",S,[n("Fragment → replaceFromFragment"),e(a)])]),s("p",null,[s("a",L,[n("Fragment → hide"),e(a)])]),s("p",null,[s("a",M,[n("Fragment → show"),e(a)])]),E]),G,N,s("p",null,[W,n(" 会自动帮你引入 "),O,n(" 依赖，你可以 "),s("a",Y,[n("参考这里"),e(a)]),n(" 以开始使用。")]),H,s("div",z,[U,s("p",null,[s("a",X,[n("DisplayDensity"),e(a)])]),j,s("p",null,[s("a",J,[n("Dimension → toPx"),e(a)])]),s("p",null,[s("a",Q,[n("Dimension → toDp"),e(a)])]),Z]),$,s("div",ss,[ns,s("p",null,[s("a",es,[n("Resources → themeResId"),e(a)])]),s("p",null,[s("a",as,[n("Resources → isUiInNightMode"),e(a)])]),s("p",null,[s("a",os,[n("Resources → toHexResourceId"),e(a)])]),s("p",null,[s("a",ls,[n("Resources → getDrawableCompat"),e(a)])]),s("p",null,[s("a",ts,[n("Resources → getColorCompat"),e(a)])]),s("p",null,[s("a",is,[n("Resources → getColorStateListCompat"),e(a)])]),s("p",null,[s("a",ps,[n("Resources → getFloatCompat"),e(a)])]),s("p",null,[s("a",rs,[n("Resources → getFontCompat"),e(a)])]),s("p",null,[s("a",cs,[n("Resources → getThemeAttrsBoolean"),e(a)])]),s("p",null,[s("a",ds,[n("Resources → getThemeAttrsFloat"),e(a)])]),s("p",null,[s("a",us,[n("Resources → getThemeAttrsInteger"),e(a)])]),s("p",null,[s("a",ys,[n("Resources → getThemeAttrsIntArray"),e(a)])]),s("p",null,[s("a",As,[n("Resources → getThemeAttrsStringArray"),e(a)])]),s("p",null,[s("a",vs,[n("Resources → getThemeAttrsString"),e(a)])]),s("p",null,[s("a",bs,[n("Resources → getThemeAttrsDimension"),e(a)])]),s("p",null,[s("a",ms,[n("Resources → getThemeAttrsDrawable"),e(a)])]),s("p",null,[s("a",Ds,[n("Resources → getThemeAttrsColorStateList"),e(a)])]),s("p",null,[s("a",Bs,[n("Resources → getThemeAttrsColor"),e(a)])]),s("p",null,[s("a",hs,[n("Resources → isThemeAttrsIdsValueEquals"),e(a)])]),s("p",null,[s("a",Cs,[n("Resources → hasThemeAttrsId"),e(a)])]),s("p",null,[s("a",gs,[n("Resources → getThemeAttrsId"),e(a)])]),s("p",null,[s("a",Fs,[n("Resources → getMenuFromResource"),e(a)])]),s("p",null,[s("a",xs,[n("Resources → getStringArray"),e(a)])]),s("p",null,[s("a",ks,[n("Resources → getIntArray"),e(a)])]),s("p",null,[s("a",_s,[n("Resources → getColorOrNull"),e(a)])]),s("p",null,[s("a",ws,[n("Resources → obtainStyledAttributes"),e(a)])]),fs]),Vs,s("div",Ts,[qs,s("p",null,[s("a",Is,[n("SystemColors"),e(a)])]),Ks]),Rs,s("div",Ps,[Ss,s("p",null,[s("a",Ls,[n("AttrState"),e(a)])]),Ms,s("p",null,[s("a",Es,[n("Color → isBrightColor"),e(a)])]),s("p",null,[s("a",Gs,[n("Color → toHexColor"),e(a)])]),s("p",null,[s("a",Ns,[n("Color → toAlphaColor"),e(a)])]),s("p",null,[s("a",Ws,[n("Color → mixColorOf"),e(a)])]),s("p",null,[s("a",Os,[n("Color → toNormalColorStateList"),e(a)])]),s("p",null,[s("a",Ys,[n("Color → toNullableColorStateList"),e(a)])]),s("p",null,[s("a",Hs,[n("Color → ColorStateList"),e(a)])]),zs]),Us,s("div",Xs,[js,s("p",null,[s("a",Js,[n("Bitmap → decodeToBitmap"),e(a)])]),s("p",null,[s("a",Qs,[n("Bitmap → decodeToBitmapOrNull"),e(a)])]),s("p",null,[s("a",Zs,[n("Bitmap → createBitmap"),e(a)])]),s("p",null,[s("a",$s,[n("Bitmap → createBitmapOrNull"),e(a)])]),s("p",null,[s("a",sn,[n("Bitmap → writeBitmap"),e(a)])]),s("p",null,[s("a",nn,[n("Bitmap → compressBitmap"),e(a)])]),s("p",null,[s("a",en,[n("Bitmap → blur"),e(a)])]),s("p",null,[s("a",an,[n("Bitmap → round"),e(a)])]),s("p",null,[s("a",on,[n("Bitmap → compress"),e(a)])]),s("p",null,[s("a",ln,[n("Bitmap → reduce"),e(a)])]),s("p",null,[s("a",tn,[n("Bitmap → zoom"),e(a)])]),pn,s("p",null,[s("a",rn,[n("BitmapBlurFactory"),e(a)])]),cn]),dn,s("div",un,[yn,An,vn,s("p",null,[n("如果你的应用程序目标为 Android 12 及以上版本，我们建议使用官方提供的 "),bn,n(" 来进行模糊操作，在以下版本中使用 "),mn,n(" 的替代品 "),s("a",Dn,[n("renderscript-intrinsics-replacement-toolkit"),e(a)]),n(" (但是已经超过两年没有维护)。")])]),Bn,s("div",hn,[Cn,s("p",null,[s("a",gn,[n("GradientDrawableCompat"),e(a)])]),Fn,s("p",null,[s("a",xn,[n("Drawable → setPaddingCompat"),e(a)])]),s("p",null,[s("a",kn,[n("Drawable → setPadding"),e(a)])]),s("p",null,[s("a",_n,[n("Drawable → updatePadding"),e(a)])]),wn]),fn,s("div",Vn,[Tn,s("p",null,[s("a",qn,[n("Toast → toast"),e(a)])]),In]),Kn,s("p",null,[n("在早些时候 "),Rn,n(" 的 "),Pn,n(" 为 "),Sn,n(" 提供了一个 "),Ln,n(" 的扩展方法，但是后期因为通知权限的问题被移除， 有关此问题的讨论可以参考 "),s("a",Mn,[n("Toast extensions on Context"),e(a)]),n("。")]),En,s("p",null,[n("以上就是它的全部使用方式，"),Gn,n(" 没有继续对其做出自定义操作，因为自定义功能在后期也被 Android 进行了限制， 请参考 "),s("a",Nn,[n("Custom toasts from the background are blocked"),e(a)]),n("。")]),Wn,s("div",On,[Yn,s("p",null,[n("请参考 "),s("a",Hn,[n("Notification runtime permission"),e(a)]),n("。")])]),zn,s("div",Un,[Xn,s("p",null,[s("a",jn,[n("Window → updateLayoutParams"),e(a)])]),s("p",null,[s("a",Jn,[n("Window → updateScreenBrightness"),e(a)])]),s("p",null,[s("a",Qn,[n("Window → clearScreenBrightness"),e(a)])]),Zn]),$n,s("div",se,[ne,s("p",null,[s("a",ee,[n("View → location"),e(a)])]),s("p",null,[s("a",ae,[n("View → parent"),e(a)])]),s("p",null,[s("a",oe,[n("View → parentOrNull"),e(a)])]),s("p",null,[s("a",le,[n("View → child"),e(a)])]),s("p",null,[s("a",te,[n("View → childOrNull"),e(a)])]),s("p",null,[s("a",ie,[n("View → firstChild"),e(a)])]),s("p",null,[s("a",pe,[n("View → lastChild"),e(a)])]),s("p",null,[s("a",re,[n("View → firstChildOrNull"),e(a)])]),s("p",null,[s("a",ce,[n("View → lastChildOrNull"),e(a)])]),s("p",null,[s("a",de,[n("View → removeSelf"),e(a)])]),s("p",null,[s("a",ue,[n("View → removeSelfInLayout"),e(a)])]),s("p",null,[s("a",ye,[n("View → showIme"),e(a)])]),s("p",null,[s("a",Ae,[n("View → hideIme"),e(a)])]),s("p",null,[s("a",ve,[n("View → performKeyPressed"),e(a)])]),s("p",null,[s("a",be,[n("View → performTouch"),e(a)])]),s("p",null,[s("a",me,[n("View → updatePadding"),e(a)])]),s("p",null,[s("a",De,[n("View → updateMargin"),e(a)])]),s("p",null,[s("a",Be,[n("View → walkToRoot"),e(a)])]),s("p",null,[s("a",he,[n("View → walkThroughChildren"),e(a)])]),s("p",null,[s("a",Ce,[n("View → indexOfInParent"),e(a)])]),s("p",null,[s("a",ge,[n("View → outlineProvider"),e(a)])]),s("p",null,[s("a",Fe,[n("View → ViewLayoutParams"),e(a)])]),s("p",null,[s("a",xe,[n("View → LayoutParamsMatchParent"),e(a)])]),s("p",null,[s("a",ke,[n("View → LayoutParamsWrapContent"),e(a)])]),_e]),we,s("div",fe,[Ve,s("p",null,[n("如果你需要使用拖拽来控制输入法的显示或隐藏 (Window Insets 动画效果)，目前 "),Te,n(" 暂时没有提供相关的扩展功能， 你可以参考 "),s("a",qe,[n("WindowInsetsAnimationController"),e(a)]),n(" 自己实现。")])]),Ie,s("div",Ke,[Re,s("p",null,[s("a",Pe,[n("LayoutInflater → layoutInflater"),e(a)])]),s("p",null,[s("a",Se,[n("LayoutInflater → inflate"),e(a)])]),Le]),Me,s("div",Ee,[Ge,s("p",null,[s("a",Ne,[n("TextView → isEllipsize"),e(a)])]),s("p",null,[s("a",We,[n("TextView → isUnderline"),e(a)])]),s("p",null,[s("a",Oe,[n("TextView → isStrikeThrough"),e(a)])]),s("p",null,[s("a",Ye,[n("TextView → textColor"),e(a)])]),s("p",null,[s("a",He,[n("TextView → updateText"),e(a)])]),s("p",null,[s("a",ze,[n("TextView → clear"),e(a)])]),s("p",null,[s("a",Ue,[n("TextView → updateTypeface"),e(a)])]),s("p",null,[s("a",Xe,[n("TextView → updateCompoundDrawables"),e(a)])]),s("p",null,[s("a",je,[n("TextView → updateCompoundDrawablesWithIntrinsicBounds"),e(a)])]),s("p",null,[s("a",Je,[n("TextView → setDigits"),e(a)])]),Qe]),Ze,s("div",$e,[sa,s("p",null,[s("a",na,[n("ViewBinding → ViewBinding"),e(a)])]),s("p",null,[s("a",ea,[n("ViewBinding → viewBinding"),e(a)])]),s("p",null,[s("a",aa,[n("ViewBinding → ViewBindingBuilder"),e(a)])]),s("p",null,[s("a",oa,[n("ViewBinding → ViewBindingDelegate"),e(a)])]),la]),ta,s("p",null,[n("这些设计的灵感部分来源于 "),s("a",ia,[n("ViewBindingKTX"),e(a)]),n(" 项目，非常感谢这个项目的作者。")]),pa,s("div",ra,[ca,s("p",null,[n("你还可以参考 "),e(l,{to:"/zh-cn/library/ui-component.html#activity"},{default:i(()=>[n("ui-component → Activity")]),_:1}),n(" 直接使用已经封装好的 "),da,n(" 或参考 "),e(l,{to:"/zh-cn/library/ui-component.html#fragment"},{default:i(()=>[n("ui-component → Fragment")]),_:1}),n(" 直接使用已经封装好的 "),ua,n("。")])]),ya])}const Da=p(d,[["render",Aa],["__file","ui-extension.html.vue"]]);export{Da as default};
